(function(n){var h=navigator.userAgent.toLowerCase(),t=function(n){return n.test(h)},i=Object.prototype.toString,f=t(/opera/),e=t(/\bchrome\b/),o=t(/webkit/),c=!e&&t(/safari/),l=!f&&t(/msie/),a=!!document.createElement("canvas").getContext,v=!o&&t(/gecko/),s=t(/ipod|ipad|iphone|android/gi),r={Linear:function(n,t,i,r){return i*n/r+t},Cubic:{easeIn:function(n,t,i,r){return i*(n/=r)*n*n+t},easeOut:function(n,t,i,r){return i*((n=n/r-1)*n*n+1)+t},easeInOut:function(n,t,i,r){return(n/=r/2)<1?i/2*n*n*n+t:i/2*((n-=2)*n*n+2)+t}}},u=function(n){var b=!1,et=!1,k=[],d=function(){return document.addEventListener?function(){document.removeEventListener("DOMContentLoaded",d,!1);w()}:document.attachEvent?function(){document.readyState==="complete"&&(document.detachEvent("onreadystatechange",d),w())}:void 0}(),ot=function(){if(!b){try{document.documentElement.doScroll("left")}catch(n){setTimeout(ot,1);return}w()}},w=function(){if(!b){b=!0;for(var n=0;n<k.length;n++)k[n].call(document);k=[]}},kt=function(){if(!et){if(et=!0,document.readyState==="complete")return setTimeout(w,1);if(document.addEventListener)document.addEventListener("DOMContentLoaded",d,!1),n.addEventListener("load",w,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",d);n.attachEvent("onload",w);var t=!1;try{t=n.frameElement==null}catch(i){}document.documentElement.doScroll&&t&&ot()}}},dt=function(n){kt();b?n.call(document,t):k.push(function(){return n.call(this)})},t=function(n){if(!n||n.nodeType)return n;if(typeof n=="string")return n.indexOf("#")!=-1&&(n=n.substring(1)),document.getElementById(n);typeof n=="function"&&dt(n)};t.apply=function(n,t){var r,i;if(n&&t&&typeof t=="object")for(i in t)typeof t[i]!="undefined"&&(n[i]=t[i]);if(!t&&n){r={};for(i in n)r[i]=n[i];return r}return n};t.apply(t,{version:"1.0",email:"taylor@ichartjs.com",isEmpty:function(n,i){return n===null||n===undefined||t.isArray(n)&&!n.length||(i?!1:n==="")},isArray:function(n){return i.apply(n)==="[object Array]"},isDate:function(n){return i.apply(n)==="[object Date]"},isObject:function(n){return!!n&&i.apply(n)==="[object Object]"},isFunction:function(n){return i.apply(n)==="[object Function]"},isNumber:function(n){return typeof n=="number"&&isFinite(n)},isString:function(n){return typeof n=="string"},isBoolean:function(n){return typeof n=="boolean"},isFalse:function(n){return typeof n=="boolean"&&!n},isElement:function(n){return n?!!n.tagName:!1},isDefined:function(n){return typeof n!="undefined"}});t.applyIf=function(n,i){if(n&&t.isObject(i))for(var r in i)t.isDefined(i[r])&&!t.isDefined(n[r])&&(n[r]=i[r]);return!i&&n?t.apply(n):n};t.merge=function(n,i,r){if(n&&t.isObject(i)){for(var u in i)t.isDefined(i[u])&&(t.isObject(i[u])?t.isObject(n[u])?t.merge(n[u],i[u]):n[u]=t.clone(i[u],!0):n[u]=i[u]);if(t.isObject(r))return t.merge(n,r)}return n};t.clone=function(n,i,r){var e={},u,f;if(t.isArray(n)&&t.isObject(i))for(u=0;u<n.length;u++)e[n[u]]=r&&t.isObject(i[n[u]])?t.clone(i[n[u]],r):i[n[u]];else if(t.isObject(n))for(f in n)e[f]=i&&t.isObject(n[f])&&!n[f].ICHARTJS_OBJECT?t.clone(n[f],i):n[f];return e};t.override=function(n,i){if(n&&i){var r=n.prototype;t.apply(r,i);t.isIE&&i.hasOwnProperty("toString")&&(r.toString=i.toString)}};t.extend=function(){var n=function(n){for(var t in n)this[t]=n[t]},i=Object.prototype.constructor;return function(r,u){var f=function(){r.apply(this,arguments)},s=function(){},e,o=r.prototype;return s.prototype=o,e=f.prototype=new s,e.constructor=f,f.superclass=o,o.constructor==i&&(o.constructor=r),f.override=function(n){t.override(f,n)},e.superclass=e.supr=function(){return o},e.override=n,t.override(f,u),f.extend=function(n){return t.extend(f,n)},f.plugin_={},f.plugin=function(n,i){t.isString(n)&&t.isFunction(i)&&(f.plugin_[n]=i)},f}}();var tt=Math.sin,st=Math.cos,gt=Math.atan,ei=Math.tan,oi=Math.acos,ni=Math.sqrt,ht=Math.abs,y=Math.PI,h=2*y,ct=Math.ceil,g=Math.round,it=Math.floor,lt=Math.max,at=Math.min,p=parseFloat,nt={},rt={},vt=function(n,t){if(n==0)return n;var r=ht(n),i=.1;if(r>1){while(r>1)r=r/10,i=i*10;return it(n/i+t)*i}for(i=1;r<1;)r=r*10,i=i*10;return g(n*i+t)/i},yt={white:"rgb(255,255,255)",green:"rgb(0,128,0)",gray:"rgb(80,80,80)",red:"rgb(255,0,0)",blue:"rgb(0,0,255)",yellow:"rgb(255,255,0)",black:"rgb(0,0,0)"},ti=function(n){return n=n.replace(/#/g,"").replace(/^(\w)(\w)(\w)$/,"$1$1$2$2$3$3"),(n.length==7?"rgba(":"rgb(")+parseInt(n.substring(0,2),16)+","+parseInt(n.substring(2,4),16)+","+parseInt(n.substring(4,6),16)+(n.length==7?",0."+n.substring(6,7)+")":")")},ut=function(n){return("0"+parseInt(n).toString(16)).slice(-2)},si=function(n){var t=n.match(/rgb\((\d+),(\d+),(\d+)\)/);return t?("#"+ut(t[1])+ut(t[2])+ut(t[3])).toUpperCase():null},pt=function(n){var t=/rgb\((\w*),(\w*),(\w*)\)/.exec(n);if(t)return[t[1],t[2],t[3]];if(t=/rgba\((\w*),(\w*),(\w*),(.*)\)/.exec(n),t)return[t[1],t[2],t[3],t[4]];throw new Error("invalid colors value '"+n+"'");},ii=function(n,i,r){var f;t.isArray(n)&&(i=n[1],r=n[2],n=n[0]);n=n/255;i=i/255;r=r/255;var u=lt(lt(n,i),r),o=at(at(n,i),r),e=u-o;return e==0?[0,0,u]:(n==u?f=(i-r)/e:i==u?f=(r-n)/e+2:r==u&&(f=(n-i)/e+4),f*=60,f<0&&(f+=360),[f,e/u,u])},ft=function(n){if(!n||(n=n.replace(/\s/g,"").toLowerCase(),/^rgb\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3}\)$/.exec(n))||/^rgba\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3},(0(\.[0-9])?|1(\.0)?)\)$/.exec(n))return n;if(/^#(([a-fA-F0-9]{6,7})|([a-fA-F0-9]{3}))$/.exec(n))return ti(n);if(yt[n])return yt[n];throw new Error("invalid colors value '"+n+"'");},ri=function(n,i,r,u){t.isArray(n)&&(u=i,i=n[1],r=n[2],n=n[0]);var f,e,o,l=it(n/60)%6,a=n/60-l,s=r*(1-i),h=r*(1-i*a),c=r*(1-i*(1-a));switch(l){case 0:f=r;e=c;o=s;break;case 1:f=h;e=r;o=s;break;case 2:f=s;e=r;o=c;break;case 3:f=s;e=h;o=r;break;case 4:f=c;e=s;o=r;break;case 5:f=r;e=s;o=h}return"rgb"+(u?"a":"")+"("+g(f*255)+","+g(e*255)+","+g(o*255)+(u?","+u+")":")")},ui=.05,fi=.14,wt=function(n,t){return t=t||fi,n>.5?t-(1-n)/10:n>.1?t-.16+n/5:n>t?t:n/2},bt=function(n,i,r,u){if(!i)return i;i=pt(ft(i));var f=ii(i);return u=u!=0?u||ui:u,f[1]-=u,n?(f[2]-=wt(f[2],r),f[1]=t.upTo(f[1],1),f[2]=t.lowTo(f[2],0)):(f[2]+=wt(1-f[2],r),f[1]=t.lowTo(f[1],0),f[2]=t.upTo(f[2],1)),ri(f,i[3])},hi=function(n){return n==0?0:n%h==0?h:n%h};return t.apply(t,{getFont:function(n,t,i,r){return n+" "+t+(r||"px")+" "+i},getDoc:function(){return n.contentWindow?n.contentWindow.document:n.contentDocument?n.contentDocument:n.document},DefineAbstract:function(n,t){if(!t[n])throw new Error("Cannot instantiate the type '"+t.type+"'.you must implements it with method '"+n+"'.");},getAA:function(n){return n=="linear"?r.Linear:n=="easeInOut"||n=="easeIn"||n=="easeOut"?r.Cubic[n]:r.Linear},noConflict:function(){return u},plugin:function(n,i,r){t.isFunction(n)&&n.plugin(i,r)},parsePadding:function(n,i){return(n=n||0,t.isNumber(n))?[n,n,n,n]:t.isArray(n)?n:(i=i||0,n=n.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g,/\s/).replace(/\s/g,",").split(","),n.length==1?n[0]=n[1]=n[2]=n[3]=p(n[0])||i:n.length==2?(n[0]=n[2]=p(n[0])||i,n[1]=n[3]=p(n[1])||i):n.length==3?(n[0]=p(n[0])||i,n[1]=n[3]=p(n[1])||i,n[2]=p(n[2])||i):(n[0]=p(n[0])||i,n[1]=p(n[1])||i,n[2]=p(n[2])||i,n[3]=p(n[3])||i),n)},distanceP2P:function(n,t,i,r){return ni((i-n)*(i-n)+(r-t)*(r-t))},atan2Radian:function(n,i,r,u){if(n==r)return u>i?y/2:y*3/2;if(i==u)return r>n?0:y;var f=t.quadrant(n,i,r,u),e=gt(ht((i-u)/(n-r)));return f?(f==3?h:y)+(f==2?e:-e):e},angle2Radian:function(n){return n*y/180},radian2Angle:function(n){return n*180/y},quadrant:function(n,t,i,r){return n<i?t<r?0:3:t<r?1:2},toPI2:function(n){while(n<0)n+=h;return n},visible:function(n,i,r){if(n>=i)return[];var u=t.quadrantd(n),f=t.quadrantd(i);if((u==2||u==3)&&(f==2||f==3)&&i-n<y)return[];if(n=t.toPI2(n),i=t.toPI2(i),i<=n&&(i+=h),n>y)n=h;else{if(i>h)return[{s:n,e:y,f:r},{s:h,e:i,f:r}];i>y&&(i=y)}return{s:n,e:i,f:r}},quadrantd:function(n){if(n==0)return 0;if(n%h==0)return 3;while(n<0)n+=h;return ct(2*(n%h)/y)-1},upTo:function(n,t){return t>n?n:t},lowTo:function(n,t){return t<n?n:t},between:function(n,i,r){return n>i?t.between(i,n,r):r>i?i:r<n?n:r},inRange:function(n,t,i){return t>i&&n<i},angleInRange:function(n,t,i){return i=i-n,i=i<0?i+h:i,i=i%h,t-n>i},angleZInRange:function(n,t,i){return t<n?i>n||i<t:t>i&&n<i},inRangeClosed:function(n,t,i){return t>=i&&n<=i},inEllipse:function(n,t,i,r){return n*n/i/i+t*t/r/r<=1},p2Point:function(n,t,i,r){return{x:n+st(i)*r,y:t+tt(i)*r}},toRgb:ft,toRgba:function(n,t){var i=pt(ft(n));return"rgba("+i[0]+","+i[1]+","+i[2]+","+t+")"},vectorP2P:function(n,i,r){return r||(i=t.angle2Radian(i),n=t.angle2Radian(n)),i=tt(i),{x:i*tt(n),y:i*st(n)}},uid:function(n){return(n||"ichartjs")+"_"+ct(Math.random()*1e4)+(new Date).getTime().toString().substring(4)},register:function(n){if(t.isString(n))rt[n.toLowerCase()]=n;else{var i=n.get("id");if(!i||i==""){for(i=t.uid(n.type);nt[i];)i=t.uid(n.type);n.push("id",i)}if(nt[i])throw new Error("exist reduplicate id :"+i);n.id=i;nt[i]=n}},create:function(n){if(!n.type||!rt[n.type])throw new Error("TypeNotFoundException["+n.type+"]");return new t[rt[n.type]](n)},get:function(n){return nt[n]},isPercent:function(n){return t.isString(n)&&n.match(/(.*)%/)},parsePercent:function(n,i){return t.isString(n)&&(n=n.match(/(.*)%/),n&&(n=i?it(p(n[1])*i/100):n[1]/100)),!n||n<=0||n>i?i:n},parseFloat:function(n,i){if(!t.isNumber(n)&&(n=p(n),!t.isNumber(n)))throw new Error("["+i+"]="+n+"is not a valid number.");return n},ceil:function(n){return vt(n,1)},floor:function(n){return vt(n,-1)},_2D:"2d",_3D:"3d",light:function(n,t,i){return bt(!1,n,t,i)},dark:function(n,t,i){return bt(!0,n,t,i)},fixPixel:function(n){return t.isNumber(n)?n:p(n.replace("px",""))||0},toPixel:function(n){return t.isNumber(n)?n+"px":t.fixPixel(n)+"px"},emptyFn:function(){return!0},supportCanvas:a,isOpera:f,isWebKit:o,isChrome:e,isSafari:c,isIE:l,isGecko:v,isMobile:s,touch:"ontouchend"in document,FRAME:s?30:60}),t.Assert={isTrue:function(n,t){if(n!==!0)throw new Error(t);}},t.requestAnimFrame=function(){var t=n.requestAnimationFrame||n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame||n.oRequestAnimationFrame||n.msRequestAnimationFrame||function(t){n.setTimeout(t,1e3/60)};return function(n){t(n)}}(),t.Event={addEvent:function(n,t,i,r){n.addEventListener?n.addEventListener(t,i,r):n.attachEvent?n.attachEvent("on"+t,i):n["on"+t]=i},fix:function(t){var i,r,u;if(typeof t=="undefined"&&(t=n.event),i={target:t.target,pageX:t.pageX,pageY:t.pageY,offsetX:t.offsetX,offsetY:t.offsetY,stopPropagation:!1,event:t},typeof t.offsetX=="undefined"){t.target||(i.target=t.srcElement||document);t.targetTouches&&(i.pageX=t.targetTouches[0].pageX,i.pageY=t.targetTouches[0].pageY);i.pageX==null&&t.clientX!=null&&(r=document.documentElement,u=document.body,i.pageX=t.clientX+(r&&r.scrollLeft||u&&u.scrollLeft||0)-(r&&r.clientLeft||u&&u.clientLeft||0),i.pageY=t.clientY+(r&&r.scrollTop||u&&u.scrollTop||0)-(r&&r.clientTop||u&&u.clientTop||0));for(var e=0,o=0,f=t.target;f!=document.body&&f;)e+=f.offsetLeft-(f.scrollLeft||0),o+=f.offsetTop,f=f.offsetParent;i.offsetX=i.pageX-e;i.offsetY=i.pageY-o}return i.x=i.offsetX,i.y=i.offsetY,t.stopPropagation||(t.stopPropagation=function(){n.event.cancelBubble=!0}),i}},t}(n);Array.prototype.each=function(n,t){for(var u=this.length,r,i=0;i<u;i++)if(r=t?n.call(t,this[i],i):n(this[i],i),typeof r=="boolean"&&!r)break;return this};Array.prototype.eachAll=function(n,t){this.each(function(i,r){return u.isArray(i)?i.eachAll(n,t):t?n.call(t,i,r):n(i,r)},t)};Array.prototype.sor=function(n){for(var t,i=this,u=i.length-1,f,r=0;r<u;r++)for(t=u;t>r;t--)(n?!n(i[t],i[t-1]):i[t]<i[t-1])&&(f=i[t],i[t]=i[t-1],i[t-1]=f)};n.iChart=u;n.$||(n.$=n.iChart)})(window),function(n){n.Element=function(t){var i=this._();i.type="element";i.ICHARTJS_OBJECT=!0;n.DefineAbstract("configure",i);n.DefineAbstract("afterConfiguration",i);i.options={};i.set({border:{enable:!1,color:"#BCBCBC",style:"solid",width:1,radius:0},shadow:!1,shadow_color:"#666666",shadow_blur:4,shadow_offsetx:0,shadow_offsety:0});i.W="width";i.H="height";i.O="top";i.B="bottom";i.L="left";i.R="right";i.C="center";i.X="originx";i.Y="originy";i.variable={};i.events={mouseup:[],touchstart:[],touchmove:[],touchend:[],mousedown:[],dblclick:[]};i.registerEvent("initialize");i.initialization=!1;i.configure.apply(i,Array.prototype.slice.call(arguments,1));i.default_=n.clone(i.options,!0);i.set(t);i.afterConfiguration(i)};n.Element.prototype={_:function(){return this},afterConfiguration:function(t){if(n.isObject(t.get("listeners")))for(var i in t.get("listeners"))t.on(i,t.get("listeners")[i]);t.initialize();t.fireEvent(t,"initialize",[t])},registerEvent:function(){for(var n=0;n<arguments.length;n++)this.events[arguments[n]]=[]},fireString:function(t,i,r,u){var f=this.fireEvent(t,i,r);return n.isString(f)?f:f!==!0&&n.isDefined(f)?f.toString():u},fireEvent:function(n,t,i){var f=this.events[t].length,u,r;if(f==1)return this.events[t][0].apply(n,i);for(u=!0,r=0;r<f;r++)this.events[t][r].apply(n,i)||(u=!1);return u},on:function(t,i){return n.isString(t)&&n.isArray(this.events[t])?this.events[t].push(i):n.isArray(t)&&t.each(function(n){this.on(n,i)},this),this},getPlugin:function(n){return this.constructor.plugin_[n]},set:function(t){n.isObject(t)&&n.merge(this.options,t)},pushIf:function(t,i){return!n.isDefined(this.get(t))||this.get(t)==null?this.push(t,i):this.get(t)},push:function(n,t){for(var i=n.split("."),f=i.length-1,r=this.options,u=0;u<f;u++)r[i[u]]||(r[i[u]]={}),r=r[i[u]];return r[i[f]]=t,t},get:function(n){for(var i=n.split("."),t=this.options[i[0]],r=1;r<i.length;r++){if(!t)return null;t=t[i[r]]}return t}};n.Painter=n.extend(n.Element,{configure:function(){this.type="painter";this.dimension=n._2D;n.DefineAbstract("commonDraw",this);n.DefineAbstract("initialize",this);this.set({strokeStyle:"gray",padding:10,color:"black",offsetx:0,offsety:0,background_color:"#FEFEFE",color_factor:.15,style:"",border:{enable:!0},gradient:!1,gradient_mode:"LinearGradientUpDown",z_index:0,listeners:null,originx:null,originy:null});this.variable.event={mouseover:!1};this.variable.animation={};this.registerEvent("click","mousemove","mouseover","mouseout","beforedraw","draw")},is3D:function(){return this.dimension==n._3D},applyGradient:function(n,t,i,r){var u=this._();u.get("gradient")&&u.get("f_color")&&(u.push("f_color",u.T.gradient(n||u.x||0,t||u.y||0,i||u.get(u.W),r||u.get(u.H),[u.get("dark_color"),u.get("light_color")],u.get("gradient_mode"))),u.push("light_color",u.T.gradient(n||u.x||0,t||u.y||0,i||u.get(u.W),r||u.get(u.H),[u.get("background_color"),u.get("light_color")],u.get("gradient_mode"))),u.push("f_color_",u.get("f_color")))},draw:function(n,t){if(t)this.root.draw(n);else{if(!this.fireEvent(this,"beforedraw",[this,n]))return this;this.commonDraw(this,n);this.fireEvent(this,"draw",[this,n])}},inject:function(n){n&&(this.root=n,this.target=this.T=n.T)},doConfig:function(){var t=this._(),r=n.parsePadding(t.get("padding")),i=t.get("border.enable"),i=i?n.parsePadding(t.get("border.width")):[0,0,0,0],u=n.toRgb(t.get("background_color")),f=t.get("color_factor"),e=t.get("gradient")?0:null,o;t.set({border_top:i[0],border_right:i[1],border_bottom:i[2],border_left:i[3],hborder:i[1]+i[3],vborder:i[0]+i[2],padding_top:r[0]+i[0],padding_right:r[1]+i[1],padding_bottom:r[2]+i[2],padding_left:r[3]+i[3],hpadding:r[1]+r[3]+i[1]+i[3],vpadding:r[0]+r[2]+i[0]+i[2]});t.get("shadow")===!0&&t.push("shadow",{color:t.get("shadow_color"),blur:t.get("shadow_blur"),offsetx:t.get("shadow_offsetx"),offsety:t.get("shadow_offsety")});t.push("f_color",u);t.push("f_color_",u);t.push("light_color",n.light(u,f,e));t.push("dark_color",n.dark(u,f*.8,e));t.push("light_color2",n.light(u,f*2,e));t.is3D()&&!t.get("xAngle_")&&(o=n.vectorP2P(t.get("xAngle"),t.get("yAngle")),t.push("xAngle_",o.x),t.push("yAngle_",o.y))}});n.Html=n.extend(n.Element,{configure:function(t){this.type="html";this.T=t;n.DefineAbstract("beforeshow",this);this.set({animation:!0,default_action:!0,width:0,height:0,style:"",index:999,offset_top:0,offset_left:0});this.transitions=""},initialize:function(){var n=this._();n.wrap=n.get("wrap");n.dom=document.createElement("div");n.get("shadow")&&n.css("boxShadow",n.get("shadow_offsetx")+"px "+n.get("shadow_offsety")+"px "+n.get("shadow_blur")+"px "+n.get("shadow_color"));n.get("border.enable")&&(n.css("border",n.get("border.width")+"px "+n.get("border.style")+" "+n.get("border.color")),n.css("borderRadius",n.get("border.radius")+"px"));n.css("position","absolute");n.css("zIndex",n.get("index"));n.applyStyle();n.wrap.appendChild(n.dom);n.style=n.dom.style;n.get("default_action")&&n.doAction(n)},width:function(){return this.dom.offsetWidth},height:function(){return this.dom.offsetHeight},onTransitionEnd:function(t,i){var r="transitionend";n.isWebKit?r="webkitTransitionEnd":n.isOpera&&(r="oTransitionEnd");n.Event.addEvent(this.dom,r,t,i)},destroy:function(){this.wrap.removeChild(this.dom);this.dom=null},transition:function(t){this.transitions=this.transitions==""?t:this.transitions+","+t;n.isWebKit?this.css("WebkitTransition",this.transitions):n.isGecko?this.css("MozTransition",this.transitions):n.isOpera?this.css("OTransition",this.transitions):this.css("transition",this.transitions)},beforeshow:function(n,t,i){i.follow(n,t,i)},show:function(n,t){this.beforeshow(n,t,this);this.css("visibility","visible");this.get("animation")&&this.css("opacity",1)},hidden:function(){this.css("visibility","hidden")},getDom:function(){return this.dom},css:function(t,i){if(n.isString(t))if(n.isDefined(i))this.dom.style[t]=i;else return this.dom.style[t]},applyStyle:function(){for(var i=this.get("style").split(";"),n,t=0;t<i.length;t++)n=i[t].split(":"),n.length>1&&this.css(n[0],n[1])}});n.Component=n.extend(n.Painter,{configure:function(t){n.Component.superclass.configure.apply(this,arguments);this.type="component";this.set({fontsize:12,font:"Verdana",fontweight:"normal",fontunit:"px",tip:{enable:!1,border:{width:2}}});this.atomic=!1;this.proxy=!1;this.ICHARTJS_CHART=!1;this.inject(t)},initialize:function(){n.DefineAbstract("isEventValid",this);n.DefineAbstract("doDraw",this);this.doConfig();this.initialization=!0},getDimension:function(){return{x:this.x,y:this.y,width:this.get("width"),height:this.get("height")}},destroy:function(){this.tip&&this.tip.destroy()},doConfig:function(){var f;n.Component.superclass.doConfig.call(this);var t=this._(),i=t.get(t.W),r=t.get("maxwidth"),u=t.get(t.X);i&&r&&(i=t.push(t.W,n.parsePercent(i,r)),i>r&&(i=t.push("width",r)),r>i&&(f=t.get("align")||t.C,f==t.C?u+=(r-i)/2:f==t.R&&(u+=r-i)));t.x=t.push(t.X,u+t.get("offsetx"));t.y=t.push(t.Y,t.get(t.Y)+t.get("offsety"));t.push("fontStyle",n.getFont(t.get("fontweight"),t.get("fontsize"),t.get("font"),t.get("fontunit")));t.data=t.get("data");t.get("tip.enable")&&(t.pushIf("tip.border.color",t.get("f_color")),n.isFunction(t.get("tip.invokeOffset"))||t.push("tip.invokeOffset",t.tipInvoke()))},isMouseOver:function(n){return this.isEventValid(n,this)},redraw:function(n){this.root.draw(n,this.root.Combination)},last:n.emptyFn,commonDraw:function(n){n.proxy||n.doDraw.call(n,n)}});n.Tip=n.extend(n.Html,{configure:function(){n.Tip.superclass.configure.apply(this,arguments);this.type="tip";this.set({name:"",index:0,value:"",text:"",showType:"follow",invokeOffset:null,fade_duration:300,move_duration:100,timing_function:"ease-out",invokeOffsetDynamic:!1,style:"textAlign:left;padding:4px 5px;cursor:default;backgroundColor:rgba(239,239,239,.85);fontSize:12px;color:black;",border:{enable:!0,radius:5},delay:200});this.registerEvent("parseText")},position:function(n,t,i){i.style.top=(n<0?0:n)+"px";i.style.left=(t<0?0:t)+"px"},follow:function(t,i,r){var u;r.get("invokeOffsetDynamic")?i.hit&&((n.isString(i.text)||n.isNumber(i.text))&&r.text(i.name,i.value,i.text,i.i,r),u=r.get("invokeOffset")(r.width(),r.height(),i),r.position(u.top,u.left,r)):r.get("showType")!="follow"&&n.isFunction(r.get("invokeOffset"))?(u=r.get("invokeOffset")(r.width(),r.height(),i),r.position(u.top,u.left,r)):r.position(t.y-r.height()*1.1-2,t.x+2,r)},text:function(n,t,i,r,u){u.dom.innerHTML=u.fireString(u,"parseText",[u,n,t,i,r],i)},hidden:function(){this.get("animation")?this.css("opacity",0):this.css("visibility","hidden")},doAction:function(n){n.T.on("mouseover",function(t,i,r){n.show(i,r)}).on("mouseout",function(t,i){n.hidden(i)});if(n.get("showType")=="follow")n.T.on("mousemove",function(t,i,r){n.T.variable.event.mouseover&&setTimeout(function(){n.T.variable.event.mouseover&&n.follow(i,r,n)},n.get("delay"))})},initialize:function(){var t,i;if(n.Tip.superclass.initialize.call(this),t=this._(),t.text(t.get("name"),t.get("value"),t.get("text"),t.get("index"),t),t.hidden(),t.get("animation")){i=t.get("move_duration")/1e3+"s "+t.get("timing_function")+" 0s";t.transition("opacity "+t.get("fade_duration")/1e3+"s "+t.get("timing_function")+" 0s");t.transition("top "+i);t.transition("left "+i);t.onTransitionEnd(function(){t.css("opacity")==0&&t.css("visibility","hidden")},!1)}}});n.CrossHair=n.extend(n.Html,{configure:function(){n.CrossHair.superclass.configure.apply(this,arguments);this.type="crosshair";this.set({top:0,left:0,hcross:!0,vcross:!0,invokeOffset:null,line_width:1,line_color:"#1A1A1A",delay:200})},follow:function(n,t,i){if(i.get("invokeOffset")){var r=i.get("invokeOffset")(n,t);r&&r.hit?(i.o_valid=!0,i.position(r.top-i.top,r.left-i.left,i)):r&&i.o_valid||i.position(i.owidth,i.oheight,i)}else i.position(n.y-i.top-1,n.x-i.left-1,i)},position:function(n,t,i){i.horizontal.style.top=n-i.size+"px";i.vertical.style.left=t-i.size+"px"},doCreate:function(t,i,r){var u=document.createElement("div");return u.style.width=n.toPixel(i),u.style.height=n.toPixel(r),u.style.backgroundColor=t.get("line_color"),u.style.position="absolute",t.dom.appendChild(u),u},doAction:function(n){n.T.on("mouseover",function(t,i,r){n.show(i,r)}).on("mouseout",function(t,i,r){n.hidden(i,r)}).on("mousemove",function(t,i,r){n.follow(i,r,n)})},initialize:function(){n.CrossHair.superclass.initialize.call(this);var t=this._(),i=n.toPixel(t.get("line_width"));t.size=t.get("line_width")/2;t.top=n.fixPixel(t.get(t.O));t.left=n.fixPixel(t.get(t.L));t.owidth=-t.T.root.width;t.oheight=-t.T.root.height;t.o_valid=!1;t.css("width","0px");t.css("height","0px");t.css("top",t.top+"px");t.css("left",t.left+"px");t.css("visibility","hidden");t.horizontal=t.doCreate(t,t.get("hcross")?n.toPixel(t.get(t.W)):"0px",i);t.vertical=t.doCreate(t,i,t.get("vcross")?n.toPixel(t.get(t.H)):"0px")}});n.Legend=n.extend(n.Component,{configure:function(){n.Legend.superclass.configure.apply(this,arguments);this.type="legend";this.set({data:undefined,width:"auto",column:1,row:"max",maxwidth:0,line_height:16,sign:"square",sign_size:10,sign_space:5,legend_space:5,z_index:1009,text_with_sign_color:!1,align:"right",valign:"middle"});this.atomic=!0;this.registerEvent("parse")},isEventValid:function(n,t){var i={valid:!1};return n.x>this.x&&n.x<t.x+t.width&&n.y>t.y&&n.y<t.y+t.height&&t.data.each(function(r,u){if(n.x>r.x&&n.x<r.x+r.width_+t.get("signwidth")&&n.y>r.y&&n.y<r.y+t.get("line_height"))return i={valid:!0,index:u,target:r},!1},t),i},drawCell:function(n,t,i,r,u,f){var e=f.get("sign_size"),o=f.getPlugin("sign");o&&o.call(f,f.T,u,{x:n+e/2,y:t},e,r)||(u.indexOf("bar")!=-1&&f.T.box(n,t-e/12,e,e/6,0,r),u=="round"?f.T.round(n+e/2,t,e/2,r):u=="round-bar"?f.T.round(n+e/2,t,e/4,r):u=="square-bar"?f.T.box(n+e/4,t-e/4,e/2,e/2,0,r):u=="square"&&f.T.box(n,t-e/2,e,e,0,r));f.T.fillText(i,n+f.get("signwidth"),t,0,f.get("text_with_sign_color")?r:f.get("color"),"lr",f.get("line_height"))},doDraw:function(t){t.T.box(t.x,t.y,t.width,t.height,t.get("border"),t.get("f_color"),!1,t.get("shadow"));t.T.textStyle(t.L,"middle",n.getFont(t.get("fontweight"),t.get("fontsize"),t.get("font")));t.data.each(function(n){t.drawCell(n.x,n.y,n.text,n.color,n.sign,t)})},doLayout:function(t,i){var s=t.get("sign_size"),o=0,h=0,e=0,f=t.get("column"),w=t.get("row"),c=t.data.length,l,v,y,a,p,r,u;for(t.T.textFont(t.get("fontStyle")),t.get("line_height")<s&&t.push("line_height",s+s/5),t.push("signwidth",s+t.get("sign_space")),t.data.each(function(n){n.width_=t.T.measureText(n.text)},t),r=0;r<f;r++){for(e=0,u=r;u<c;u+=f)e=Math.max(e,t.data[u].width_);t.columnwidth[r]=e;o+=e}for(r=0;r<w;r++){for(e=0,u=r*f;u<c;u++)e=Math.max(e,t.data[u].text.split("\n").length);t.columnheight[r]=e;h+=e}if(o=t.push(t.W,o+t.get("hpadding")+t.get("signwidth")*f+(f-1)*t.get("legend_space")),o>t.get("maxwidth")&&(l=Math.floor(t.get("fontsize")*(t.get("maxwidth")/o)),!(l<10&&f==1))){l>9?t.push("fontStyle",n.getFont(t.get("fontweight"),t.push("fontsize",l),t.get("font"))):f>1&&t.push("row",Math.ceil(c/t.push("column",f-1)));t.doLayout(t,i);return}for(t.width=o,t.height=h=t.push(t.H,h*t.get("line_height")+t.get("vpadding")),t.y=t.get("valign")==t.O?i.get("t_originy"):t.get("valign")==t.B?i.get("b_originy")-h:i.get("centery")-h/2,t.x=t.get("align")==t.L?i.get("l_originx"):t.get("align")==t.C?i.get("centerx")-o/2:i.get("r_originx")-o,t.x=t.push(t.X,(t.x<0?i.get("l_originx"):t.x)+t.get("offsetx")),t.y=t.push(t.Y,(t.y<0?i.get("t_originy"):t.y)+t.get("offsety")),a=t.y+t.get("padding_top"),s=t.get("legend_space")+t.get("signwidth"),r=0;r<w;r++){for(y=t.x+t.get("padding_left"),p=t.columnheight[r]/2*t.get("line_height"),a+=p,u=0;u<f&&r*f+u<c;u++)v=t.data[r*f+u],v.y=a,v.x=y,y+=t.columnwidth[u]+s;a+=p}},doConfig:function(){n.Legend.superclass.doConfig.call(this);var t=this._(),f=t.root,r=n.isNumber(t.get("column")),i=n.isNumber(t.get("row")),u=t.data.length;t.get("align")==t.C&&t.get("valign")=="middle"&&t.push("valign",t.O);f.get("align")==t.L&&t.get("valign")=="middle"&&t.push("align",t.R);t.data.each(function(i,r){n.merge(i,t.fireEvent(t,"parse",[t,i.name,r]));i.text=i.text||i.name||"";i.sign=i.sign||t.get("sign")},t);r||i||(r=t.push("column",1));r&&!i&&(i=t.push("row",Math.ceil(u/t.get("column"))));!r&&i&&(r=t.push("column",Math.ceil(u/t.get("row"))));r=t.get("column");i=t.get("row");u>i*r&&(i+=Math.ceil((u-i*r)/r),i=t.push("row",i));t.columnwidth=[];t.columnheight=[];t.doLayout(t,f)}});n.Label=n.extend(n.Component,{configure:function(){n.Label.superclass.configure.apply(this,arguments);this.type="label";this.set({text:"",line_height:12,line_thickness:1,sign:"square",sign_size:12,padding:"2 5",offsety:2,sign_space:5,background_color:"#efefef",text_with_sign_color:!1});this.atomic=!0;this.registerEvent()},isEventValid:function(t,i){return{valid:n.inRange(i.labelx,i.labelx+i.get(i.W),t.x)&&n.inRange(i.labely,i.labely+i.get(i.H),t.y)}},text:function(n){n&&this.push("text",n);this.push(this.W,this.T.measureText(this.get("text"))+this.get("hpadding")+this.get("sign_size")+this.get("sign_space"))},localizer:function(n){var t=n.get("quadrantd"),i=n.get("line_points"),r=n.get("smooth"),t=t>=1&&t<=2,u=n.get("labelx"),f=n.get("labely");n.labelx=u+(t?-n.get(n.W)-r:r);n.labely=f-n.get(n.H)/2;i[2]={x:u,y:f};i[3]={x:i[2].x+(t?-r:r),y:i[2].y}},doLayout:function(n,t,i,r){r.push("labelx",r.get("labelx")+n/i);r.push("labely",r.get("labely")+t/i);r.get("line_points").each(function(i,r){return i.x+=n,i.y+=t,r==1},r);r.localizer(r)},doDraw:function(n){var f=n.get("line_points"),t=n.get("sign_size"),i=n.labelx+n.get("padding_left"),r=n.labely+n.get("padding_top"),u;n.T.label(f,n.get("line_thickness"),n.get("border.color"));n.T.box(n.labelx,n.labely,n.get(n.W),n.get(n.H),n.get("border"),n.get("f_color"),!1,n.get("shadow"));n.T.textStyle(n.L,n.O,n.get("fontStyle"));u=n.get("color");n.get("text_with_sign_color")&&(u=n.get("scolor"));n.get("sign")=="square"?n.T.box(i,r,t,t,0,n.get("scolor")):n.get("sign")&&n.T.round(i+t/2,r+t/2,t/2,n.get("scolor"));n.T.fillText(n.get("text"),i+t+n.get("sign_space"),r,n.get("textwidth"),u)},doConfig:function(){n.Label.superclass.doConfig.call(this);var t=this._();t.T.textFont(t.get("fontStyle"));t.get("fontsize")>t.get("line_height")&&t.push("line_height",t.get("fontsize"));t.get("sign")||(t.push("sign_size",0),t.push("sign_space",0));t.push(t.H,t.get("line_height")+t.get("vpadding"));t.text();t.localizer(t)}});n.Text=n.extend(n.Component,{configure:function(){n.Text.superclass.configure.apply(this,arguments);this.type="text";this.set({text:"",textAlign:"center",align:"center",background_color:0,textBaseline:"top",border:{enable:!1},width:0,height:0,padding:0,writingmode:"lr",line_height:16,rotate:0});this.registerEvent()},doDraw:function(n){n.get("box_feature")&&n.T.box(n.x,n.y,n.get(n.W),n.get(n.H),n.get("border"),n.get("f_color"));n.T.text(n.get("text"),n.get("textx"),n.get("texty"),n.get(n.W)-n.get("hpadding"),n.get("color"),n.get("textAlign"),n.get("textBaseline"),n.get("fontStyle"),n.get("writingmode"),n.get("line_height"),n.get("shadow"),n.get("rotate"))},isEventValid:function(){return{valid:!1}},doLayout:function(n,t,i,r){r.x=r.push(r.X,r.x+n);r.y=r.push(r.Y,r.y+t);r.push("textx",r.get("textx")+n);r.push("texty",r.get("texty")+t)},doConfig:function(){n.Text.superclass.doConfig.call(this);var t=this._(),u=t.x,f=t.y+t.get("padding_top"),i=t.get(t.W),r=t.get(t.H),e=t.get("textAlign");u+=e==t.C?i/2:e==t.R?i-t.get("padding_right"):t.get("padding_left");r&&(f+=r/2,t.push("textBaseline","middle"));t.push("textx",u);t.push("texty",f);t.push("box_feature",i&&r);t.applyGradient()}}),function(n){function v(t){if(typeof t=="string"&&(t=n(t)),!t||!t.tagName||t.tagName.toLowerCase()!="canvas")throw new Error("there not a canvas element");this.canvas=t;this.c=this.canvas.getContext("2d")}var f=Math.PI,h=f/90,y=h/2,s=Math.ceil,i=Math.floor,c=2*f,e=Math.max,o=Math.min,r=Math.sin,u=Math.cos,t=function(n,t){return n==1?i(t)+.5:Math.round(t)},a=function(n,t,i,r){var a=t.x,u=t.y,h=n[i-1],w=n[i+1],y,s,v,f,c,l,p;return i<n.length-1&&(c=h.y,l=w.y,y=(r*a+h.x)/(r+1),s=(r*u+c)/(r+1),v=(r*a+w.x)/(r+1),f=(r*u+l)/(r+1),p=(f-s)*(v-a)/(v-y)+u-f,s+=p,f+=p,s>c&&s>u?(s=e(c,u),f=2*u-s):s<c&&s<u&&(s=o(c,u),f=2*u-s),f>l&&f>u?(f=e(l,u),s=2*u-f):f<l&&f<u&&(f=o(l,u),s=2*u-f),t.rcx=v,t.rcy=f),[h.rcx||h.x,h.rcy||h.y,y||a,s||u,a,u]},l=function(t){return n.isNumber(t)?t:n.parseFloat(t,t)},p=function(t,i){var u,r=0,f,c=0,h=!1,a=i.get("labels"),v,w,y,p,b,s;if(i.data=t,i.dataType=="simple")i.total=0,t.each(function(t){var a,s;if(t.background_color=t.color,r=t.value||0,n.isArray(r)){for(a=0,c=r.length>c?r.length:c,s=0;s<r.length;s++)r[s]=l(r[s]),a+=r[s],h||(u=f=r[s],h=!0),u=e(r[s],u),f=o(r[s],f);t.total=a}else r=l(r),t.value=r,i.total+=r,h||(u=f=r,h=!0),u=e(r,u),f=o(r,f)},i),n.isArray(a)&&(c=a.length>c?a.length:c),i.push("maxItemSize",c);else if(i.dataType=="stacked"||i.dataType=="complex"){if(v=a.length,b=i.dataType=="stacked",v==0)for(v=t[0].value.length,s=0;s<v;s++)a.push("");for(i.columns=[],s=0;s<v;s++)w=[],y=0,t.each(function(i,c){(r=i.value[s],r)&&(i.value[s]=r=l(r,r),y+=r,b?p=t[c].color:(p=i.color,h||(u=f=r,h=!0),u=e(r,u),f=o(r,f)),w.push(n.applyIf({name:i.name,value:i.value[s],background_color:p,color:p},n.isArray(i.extra)?i.extra[s]||{}:i)))}),b&&(h||(u=f=r,h=!0),u=e(y,u),f=o(y,f)),i.columns.push({total:y,name:a[s],item:w})}i.push("minValue",f);i.push("maxValue",u);i.doConfig();i.initialization=!0};v.prototype={getContext:function(){return this.c},css:function(t,i){if(n.isDefined(i))this.canvas.style[t]=i;else return this.canvas.style[t]},ellipse:function(n,t,i,f,e,o,s,c,l,a,v,y,p,w){var b=e,p=!!p;for(this.save().gCo(w).strokeStyle(c,l,a).shadowOn(v).fillStyle(s).moveTo(n,t).beginPath(),p&&this.moveTo(n,t);b<=o;)this.lineTo(n+i*u(b),t+f*r(b)),b+=h;return this.lineTo(n+i*u(o),t+f*r(o)).closePath().stroke(c).fill(s).restore()},arc:function(n,t,f,e,o,s,h,c,l,a,v,y,p,w){return(c&&(f-=i(l/2)),f<=0)?this:(this.save().gCo(w).strokeStyle(c,l,a).fillStyle(h).beginPath(),e?(this.moveTo(n+u(o)*(f-e),t+r(o)*(f-e)).lineTo(n+u(o)*f,t+r(o)*f),this.c.arc(n,t,f,o,s,y),this.lineTo(n+u(s)*(f-e),t+r(s)*(f-e)),this.c.arc(n,t,f-e,s,o,!y)):(this.c.arc(n,t,f,o,s,y),p&&this.lineTo(n,t)),this.closePath(),c?this.shadowOn(v).stroke(c).shadowOff().fill(h):this.shadowOn(v).fill(h),this.restore())},sector:function(n,t,i,r,u,f,e,o,s,h,c,l,a,v){return c&&this.arc(n,t,i,r,u,f,e,o,s,h,c,l,!a,!v),this.arc(n,t,i,r,u,f,e,o,s,h,!1,l,!a)},sector3D:function(){var f=function(t,i,f,e,o,s,c,l,a){var y=function(n,o){this.lineTo(t+f*u(n),i+(o||0)+e*r(n))},v=o;for(this.fillStyle(n.dark(a)).moveTo(t+f*u(o),i+e*r(o)).beginPath();v<=s;)y.call(this,v),v=v+h;for(y.call(this,s),this.lineTo(t+f*u(s),i+l+e*r(s)),v=s;v>=o;)y.call(this,v,l),v=v-h;y.call(this,o,l);this.lineTo(t+f*u(o),i+e*r(o)).closePath().fill(!0)},i=function(n,t,i,f,e,o,s,h){var c=n+i*u(s),l=t+o+f*r(s);this.moveTo(n,t).beginPath().fillStyle(h).lineTo(n,t+o).lineTo(c,l).lineTo(c,l-o).lineTo(n,t).closePath().fill(!0)},e=function(t,r,u,f,e,o,s,h,c){var l=n.quadrantd(e),a=n.quadrantd(o);c=n.dark(c);(l==1||l==2)&&i.call(this,t,r,u,f,s,h,e,c);(a==0||a==3)&&i.call(this,t,r,u,f,s,h,o,c)},t=function(n,t,i,r,u,o,s,h,c,l,a,v,y){return this.ellipse(n,t+s,i,r,u,o,h,c,l,a,v,y,!0),e.call(this,n,t,i,r,u,o,y,s,h),this.ellipse(n,t,i,r,u,o,h,c,l,a,!1,y,!0),f.call(this,n,t,i,r,u,o,y,s,h),this};return t.layerPaint=e,t.sPaint=f,t.layerDraw=i,t}(),textStyle:function(n,t,i){return this.textAlign(n).textBaseline(t).textFont(i)},strokeStyle:function(n,t,i,r){return n&&(t&&(this.c.lineWidth=t),i&&(this.c.strokeStyle=i),r&&(this.c.lineJoin=r)),this},globalAlpha:function(n){return n&&(this.c.globalAlpha=n),this},fillStyle:function(n){return n&&(this.c.fillStyle=n),this},arc2:function(n,t,i,r,u,f){return i&&this.c.arc(n,t,i,r,u,f),this},textAlign:function(n){return n&&(this.c.textAlign=n),this},textBaseline:function(n){return n&&(this.c.textBaseline=n),this},textFont:function(n){return n&&(this.c.font=n),this},shadowOn:function(n){return n&&(this.c.shadowColor=n.color,this.c.shadowBlur=n.blur,this.c.shadowOffsetX=n.offsetx,this.c.shadowOffsetY=n.offsety),this},shadowOff:function(){return this.c.shadowColor="white",this.c.shadowBlur=this.c.shadowOffsetX=this.c.shadowOffsetY=0,this},gradient:function(n,t,i,r,u,f,e){f=f.toLowerCase();var o=n,s=t,h=!f.indexOf("linear");if(f=f.substring(14),h){switch(f){case"updown":s+=r;break;case"downup":t+=r;break;case"leftright":o+=i;break;case"rightleft":n+=i;break;default:return u[0]}return this.avgLinearGradient(n,t,o,s,u)}return n+=i/2,t+=r/2,this.avgRadialGradient(n,t,e||0,n,t,i>r?r:i,f=="outin"?u.reverse():u)},avgLinearGradient:function(n,t,i,r,u){for(var e=this.createLinearGradient(n,t,i,r),f=0;f<u.length;f++)e.addColorStop(f/(u.length-1),u[f]);return e},createLinearGradient:function(n,t,i,r){return this.c.createLinearGradient(n,t,i,r)},avgRadialGradient:function(n,t,i,r,u,f,e){for(var s=this.createRadialGradient(n,t,i,r,u,f),o=0;o<e.length;o++)s.addColorStop(o/(e.length-1),e[o]);return s},createRadialGradient:function(n,t,i,r,u,f){return this.c.createRadialGradient(n,t,i,r,u,f)},text:function(n,t,i,r,u,f,e,o,s,h,c,l){return this.save().textStyle(f,e,o).fillText(n,t,i,r,u,s,h,c,l).restore()},fillText:function(n,i,r,u,f,e,o,s,h){if(n=n.toString(),!n||!n.length)return this;u=u||!1;e=e||"lr";o=o||16;i=t(0,i);r=t(0,r);var c=n.split(e=="tb"?"":"\n");return c.length>1&&(this.c.textBaseline=="middle"?r=r-(c.length-1)*o/2:this.c.textBaseline=="bottom"&&(r=r-(c.length-1)*o)),this.save().fillStyle(f).translate(i,r).rotate(y*h).shadowOn(s),c.each(function(n,t){try{u&&u>0?this.c.fillText(n,0,t*o,u):this.c.fillText(n,0,t*o)}catch(f){console.log(f.message+"["+n+","+i+","+r+"]")}},this),this.restore()},measureText:function(n){n=n.split("\n");var t=0;return n.each(function(n){t=e(this.measureText(n).width,t)},this.c),t},moveTo:function(n,t){return n=n||0,t=t||0,this.c.moveTo(n,t),this},lineTo:function(n,t){return n=n||0,t=t||0,this.c.lineTo(n,t),this},save:function(){return this.c.save(),this},restore:function(){return this.c.restore(),this},beginPath:function(){return this.c.beginPath(),this},closePath:function(){return this.c.closePath(),this},stroke:function(n){return n&&this.c.stroke(),this},fill:function(n){return n&&this.c.fill(),this},cube:function(i,r,u,f,e,o,s,h,c,l,a,v){i=t(l,i);r=t(l,r);s=s&&s>0?s:e;var y=i+s*u,p=r-s*f;return y=t(l,y),p=t(l,p),v&&(this.polygon(h,c,l,a,v,!1,[{x:i,y:r},{x:y,y:p},{x:y+e,y:p},{x:i+e,y:r}]),this.polygon(h,c,l,a,v,!1,[{x:i,y:r},{x:i,y:r+o},{x:i+e,y:r+o},{x:i+e,y:r}]),this.polygon(h,c,l,a,v,!1,[{x:i+e,y:r},{x:y+e,y:p},{x:y+e,y:p+o},{x:i+e,y:r+o}])),this.polygon(n.dark(h),c,l,a,!1,!1,[{x:i,y:r},{x:y,y:p},{x:y+e,y:p},{x:i+e,y:r}]),this.polygon(h,c,l,a,!1,!1,[{x:i,y:r},{x:i,y:r+o},{x:i+e,y:r+o},{x:i+e,y:r}]),this.polygon(n.dark(h),c,l,a,!1,!1,[{x:i+e,y:r},{x:y+e,y:p},{x:y+e,y:p+o},{x:i+e,y:r+o}]),this},cube3D:function(i,r,u,f,e,o,s,h,c,l,a,v){var p,y;for(i=t(l,i),r=t(l,r),h=!h||h==0?o:h,e?(p=n.vectorP2P(u,f),u=i+h*p.x,f=r-h*p.y):(u=i+h*u,f=r-h*f);v.length<6;)v.push(!1);return u=t(l,u),f=t(l,f),y=[],f<0?n.isObject(v[4])&&y.push(n.applyIf({points:[{x:i,y:r-s},{x:u,y:f-s},{x:u+o,y:f-s},{x:i+o,y:r-s}]},v[4])):n.isObject(v[0])&&y.push(n.applyIf({points:[{x:i,y:r},{x:u,y:f},{x:u+o,y:f},{x:i+o,y:r}]},v[0])),n.isObject(v[1])&&y.push(n.applyIf({points:[{x:u,y:f},{x:u,y:f-s},{x:u+o,y:f-s},{x:u+o,y:f}]},v[1])),n.isObject(v[2])&&y.push(n.applyIf({points:[{x:i,y:r},{x:i,y:r-s},{x:u,y:f-s},{x:u,y:f}]},v[2])),n.isObject(v[3])&&y.push(n.applyIf({points:[{x:i+o,y:r},{x:i+o,y:r-s},{x:u+o,y:f-s},{x:u+o,y:f}]},v[3])),f<0?n.isObject(v[0])&&y.push(n.applyIf({points:[{x:i,y:r},{x:u,y:f},{x:u+o,y:f},{x:i+o,y:r}]},v[0])):n.isObject(v[4])&&y.push(n.applyIf({points:[{x:i,y:r-s},{x:u,y:f-s},{x:u+o,y:f-s},{x:i+o,y:r-s}]},v[4])),n.isObject(v[5])&&y.push(n.applyIf({points:[{x:i,y:r},{x:i,y:r-s},{x:i+o,y:r-s},{x:i+o,y:r}]},v[5])),y.each(function(n){this.polygon(n.color,c,l,a,n.shadow,n.alpha,n.points)},this),this},polygon:function(n,i,r,u,f,e,o,s,h,c){var l;if(this.save().strokeStyle(i,r,u).beginPath().fillStyle(n).globalAlpha(e).shadowOn(f).moveTo(o[0].x,o[0].y),s){for(this.moveTo(t(r,c[0].x),t(r,c[0].y)).lineTo(t(r,o[0].x),t(r,o[0].y)),l=1;l<o.length;l++)this.bezierCurveTo(a(o,o[l],l,h));this.lineTo(t(r,c[1].x),t(r,c[1].y))}else for(l=1;l<o.length;l++)this.lineTo(t(r,o[l].x),t(r,o[l].y));return this.closePath().stroke(i).fill(n).restore()},lines:function(n,i,r,u){if(!i)return this;this.save().gCo(u).beginPath().strokeStyle(!0,i,r).moveTo(t(i,n[0]),t(i,n[1]));for(var f=2;f<n.length-1;f+=2)this.lineTo(t(i,n[f]),t(i,n[f+1]));return this.stroke(!0).restore()},bezierCurveTo:function(n){return this.c.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]),this},label:function(n,i,r){return this.save().beginPath().strokeStyle(!0,i,r).moveTo(t(i,n[0].x),t(i,n[0].y)).bezierCurveTo([n[1].x,n[1].y,n[2].x,n[2].y,n[3].x,n[3].y]).stroke(!0).restore()},lineArray:function(n,i,r,u,f){if(!i)return this;this.save().beginPath().strokeStyle(!0,i,r).moveTo(t(i,n[0].x),t(i,n[0].y));for(var e=1;e<n.length;e++)u?this.bezierCurveTo(a(n,n[e],e,f||1.5)):this.lineTo(t(i,n[e].x),t(i,n[e].y));return this.stroke(!0).restore()},dotted:function(r,u,f,e,o,s,h,c,l){var p,w,a;if(!o)return this;if(r=t(o,r),u=t(o,u),f=t(o,f),e=t(o,e),p=n.distanceP2P(r,u,f,e),h<=0||p<=h||r!=f&&u!=e)return this.line(r,u,f,e,o,s,l);(r>f||u>e)&&(w=r,r=f,f=w,w=u,u=e,e=w);this.save().gCo(l).strokeStyle(!0,o,s).beginPath().moveTo(r,u);var v=h*(c||1),y=i(p/(h+v)),k=p-y*(h+v)>h,b=u==e;for(y=k?y+1:y,a=1;a<=y;a++)this.lineTo(b?r+h*a+v*(a-1):r,b?u:u+h*a+v*(a-1)).moveTo(b?r+(h+v)*a:r,b?u:u+(h+v)*a);return k||this.lineTo(f,e),this.stroke(!0).restore()},line:function(n,i,r,u,f,e,o){return f?(this.save().gCo(o),this.beginPath().strokeStyle(!0,f,e).moveTo(t(f,n),t(f,i)).lineTo(t(f,r),t(f,u)).stroke(!0).restore()):this},round:function(n,t,i,r,u,f){return this.arc(n,t,i,0,0,c,r,!!f,u,f)},round0:function(n,t,i,r,u){return this.arc(n.x,n.y,t,0,0,c,i,!!u,r,u)},fillRect:function(n,t,i,r){return this.c.fillRect(n,t,i,r),this},translate:function(n,t){return this.c.translate(n,t),this},rotate:function(n){return this.c.rotate(n),this},clearRect:function(n,t,i,r){return n=n||0,t=t||0,i=i||this.canvas.width,r=r||this.canvas.height,this.c.clearRect(n,t,i,r),this},gCo:function(n){return n?this.gCO(n):this},gCO:function(n){return this.c.globalCompositeOperation=n?"destination-over":"source-over",this},box:function(r,u,e,o,h,l,a,v,y){if(h=h||{enable:0},h.enable){var p=h.width,b=h.color,w=h.radius,k=n.isNumber(p);p=n.parsePadding(p);p[0]==p[1]&&p[1]==p[2]&&p[2]==p[3]&&(k=!0);v=v?1:-1;e+=v*(p[1]+p[3])/2;o+=v*(p[0]+p[2])/2;r-=v*(p[3]/2);u-=v*(p[0]/2);p=k?p[0]:p;w=!k||!w||w==0||w=="0"?0:n.parsePadding(w)}return this.save().gCo(y).fillStyle(l).strokeStyle(k,p,b),w?this.beginPath().moveTo(t(p,r+w[0]),t(p,u)).lineTo(t(p,r+e-w[1]),t(p,u)).arc2(t(p,r+e-w[1]),t(p,u+w[1]),w[1],f*3/2,c).lineTo(t(p,r+e),t(p,u+o-w[2])).arc2(t(p,r+e-w[2]),t(p,u+o-w[2]),w[2],0,f/2).lineTo(t(p,r+w[3]),t(p,u+o)).arc2(t(p,r+w[3]),t(p,u+o-w[3]),w[3],f/2,f).lineTo(t(p,r),t(p,u+w[0])).arc2(t(p,r+w[0]),t(p,u+w[0]),w[0],f,f*3/2).closePath().shadowOn(a).stroke(p).shadowOff().fill(l):!h.enable||k?(p&&h.enable&&(this.shadowOn(a).c.strokeRect(r,u,e,o),this.shadowOff()),l&&this.fillRect(r,u,e,o)):(p&&(b=n.isArray(b)?b:[b,b,b,b],this.shadowOn(a).line(r+e,u+p[0]/2,r+e,u+o-p[0]/2,p[1],b[1],0).line(r,u+p[0]/2,r,u+o-p[0]/2,p[3],b[3],0).line(i(r-p[3]/2),u,r+e+p[1]/2,u,p[0],b[0],0).line(i(r-p[3]/2),u+o,r+e+p[1]/2,u+o,p[2],b[2],0).shadowOff()),l&&this.beginPath().moveTo(i(r+p[3]/2),i(u+p[0]/2)).lineTo(s(r+e-p[1]/2),u+p[0]/2).lineTo(s(r+e-p[1]/2),s(u+o-p[2]/2)).lineTo(i(r+p[3]/2),s(u+o-p[2]/2)).lineTo(i(r+p[3]/2),i(u+p[0]/2)).closePath().fill(l)),this.restore()},toDataURL:function(n){return this.canvas.toDataURL(n||"image/png")},addEvent:function(t,i,r){n.Event.addEvent(this.canvas,t,i,r)}};n.taylor={light:function(n,t){t.highlight=!1;n.on("mouseover",function(){t.highlight=!0;n.redraw("mouseover")}).on("mouseout",function(){t.highlight=!1;n.redraw("mouseout")}).on("beforedraw",function(){return n.push("f_color",t.highlight?n.get("light_color"):n.get("f_color_")),!0})}};n.Chart=n.extend(n.Painter,{configure:function(){n.Chart.superclass.configure.apply(this,arguments);this.type="chart";this.dataType="simple";this.set({id:"",render:"",data:[],width:undefined,height:undefined,lineJoin:"round",align:"center",default_mouseover_css:!0,turn_off_touchmove:!1,showpercent:!1,decimalsnum:1,title:{text:"",fontweight:"bold",fontsize:20,height:30},subtitle:{text:"",fontweight:"bold",fontsize:16,height:20},footnote:{text:"",color:"#5d7f97",textAlign:"right",height:20},animation:!1,doAnimation:null,animation_timing_function:"easeInOut",animation_duration:1e3,z_index:999,legend:{enable:!1},tip:{enable:!1}});this.registerEvent("beforeAnimation","afterAnimation","resize","animating");this.T=null;this.Rendered=!1;this.Combination=!1;this.Animationed=!1;this.show=!1;this.data=[];this.plugins=[];this.components=[];this.oneways=[];this.total=0;this.ICHARTJS_CHART=!0},toDataURL:function(n){return this.T.toDataURL(n)},segmentRect:function(){this.Combination||this.T.clearRect()},resetCanvas:function(){this.Combination||this.T.box(this.get("l_originx"),this.get("t_originy"),this.get("client_width"),this.get("client_height"),0,this.get("f_color"),0,0,!0)},animation:function(t){(t.segmentRect(),t.coo&&!t.ILLUSIVE_COO&&t.coo.draw(),t.doAnimation(t.variable.animation.time,t.duration,t),t.plugins.each(function(n){n.A_draw&&(n.variable.animation.animating=!0,n.variable.animation.time=t.variable.animation.time,n.draw(),n.variable.animation.animating=!1)}),t.Combination)||(t.oneways.each(function(n){n.draw()}),t.variable.animation.time<t.duration?(t.variable.animation.time++,n.requestAnimFrame(function(){t.animation(t)})):n.requestAnimFrame(function(){t.Animationed=!0;t.plugins.each(function(n){n.Animationed=!0});t.processAnimation=!1;t.draw();t.plugins.each(function(n){n.processAnimation=!1});t.fireEvent(t,"afterAnimation",[t])}))},runAnimation:function(n){n.fireEvent(n,"beforeAnimation",[n]);n.A_draw||(n.variable.animation={type:0,time:0,queue:[]});n.processAnimation=!0;n.animation(n)},doSort:function(){var t=function(t,i){return(n.isArray(t)?t.zIndex||0:t.get("z_index"))>(n.isArray(i)?i.zIndex||0:i.get("z_index"))};this.components.sor(t);this.oneways.sor(t)},commonDraw:function(t,i){if(t.show=!1,t.redraw||(n.Assert.isTrue(t.Rendered,t.type+" has not rendered"),n.Assert.isTrue(t.data&&t.data.length>0,t.type+"'s data is empty"),n.Assert.isTrue(t.initialization,t.type+" Failed to initialize"),t.doSort()),t.redraw=!0,!t.Animationed&&t.get("animation")){t.runAnimation(t);return}t.segmentRect();t.components.eachAll(function(n){n.draw(i)});t.components.eachAll(function(n){n.last&&n.last(n)});t.oneways.each(function(n){n.draw()});t.show=!0},plugin:function(n){var t=this._();n.inject(t);n.ICHARTJS_CHART&&(n.Combination=!0,n.setUp());t.get("animation")||n.push("animation",!1);n.duration=t.duration;t.register(n);t.plugins.push(n)},destroy:function(n){n.components.eachAll(function(n){n.destroy()});n.oneways.each(function(n){n.destroy()})},getTitle:function(){return this.title},getSubTitle:function(){return this.subtitle},getFootNote:function(){return this.footnote},getDrawingArea:function(){return{x:this.get("l_originx"),x:this.get("t_originy"),width:this.get("client_width"),height:this.get("client_height")}},create:function(t,i){var r;if(t.get("fit")){var f=window.innerWidth,e=window.innerHeight,u=n.getDoc().body.style;u.padding="0px";u.margin="0px";u.overflow="hidden";t.push(t.W,f);t.push(t.H,e)}t.canvasid=n.uid(t.type);t.shellid="shell-"+t.canvasid;r=[];r.push("<div id='");r.push(t.shellid);r.push("' style='padding:0px;margin:0px;overflow:hidden;position:relative;'>");r.push("<canvas id= '");r.push(t.canvasid);r.push("' style='-webkit-text-size-adjust: none;'>");r.push("<p>Your browser does not support the canvas element<\/p><\/canvas>");r.push("<\/div>");i.innerHTML=r.join("");t.shell=n(t.shellid);t.T=t.target=new v(t.canvasid);t.size(t);t.Rendered=!0},setUp:function(){var n=this._();n.redraw=!1;n.T.clearRect();n.initialization=!1;n.initialize()},load:function(n){var t=this._();t.push("data",n||[]);t.setUp();(t.Combination?t.root:t).draw()},resize:function(t,i){t=n.parseFloat(t);i=n.parseFloat(i);var r=this._();r.Combination||(r.width=r.push(r.W,t),r.height=r.push(r.H,i),r.size(r));r.set(r.fireEvent(r,"resize",[t,i]));r.setUp();r.plugins.eachAll(function(n){n.Combination&&n.resize(t,i)});r.Combination||r.draw()},size:function(n){n.T.canvas.width=n.width=n.pushIf(n.W,400);n.T.canvas.height=n.height=n.pushIf(n.H,300);n.shell.style.width=n.width+"px";n.shell.style.height=n.height+"px"},initialize:function(){var t=this._(),i=t.get("data"),r=t.get("render");t.push(t.X,null);t.push(t.Y,null);t.Combination?(n.apply(t.options,n.clone([t.W,t.H,"padding","border","client_height","client_width","minDistance","maxDistance","centerx","centery","l_originx","r_originx","t_originy","b_originy"],t.root.options,!0)),t.width=t.get(t.W),t.height=t.get(t.H),t.shell=t.root.shell,t.Rendered=!0):t.Rendered||r&&t.create(t,n(r));t.Rendered&&!t.initialization&&(i&&i.length>0?p.call(t,i,t):n.isString(t.get("url"))&&t.ajax.call(t,t.get("url"),function(n){t.push("data",n);t.initialize();t.draw()}))},eventOff:function(){this.stopEvent=!0},eventOn:function(){this.stopEvent=!1},oneWay:function(t){t.T.strokeStyle(!0,0,t.get("strokeStyle"),t.get("lineJoin"));t.processAnimation=t.get("animation");n.isFunction(t.get("doAnimation"))&&(t.doAnimation=t.get("doAnimation"));t.animationArithmetic=n.getAA(t.get("animation_timing_function"));var i=t.variable.event,f=t.Combination,e=!t.get("turn_off_touchmove")&&!f,o=!n.touch&&t.get("default_mouseover_css")&&!f,r,h,u=n.touch?["touchstart","touchmove"]:["click","mousemove"];t.stopEvent=!1;t.A_draw=f&&t.processAnimation;n.register(t);f||u.each(function(i){t.T.addEvent(i,function(r){t.processAnimation||t.stopEvent||r.targetTouches&&r.targetTouches.length!=1||t.fireEvent(t,i,[t,n.Event.fix(r)])},!1)});t.on(u[0],function(n,t){return n.components.eachAll(function(n){if(n.ICHARTJS_CHART){if(n.fireEvent(n,u[0],[n,t]))return i.click=!0,!1}else{var r=n.isMouseOver(t);if(r.valid)return i.click=!0,n.fireEvent(n,"click",[n,t,r]),!t.stopPropagation}}),i.click?(e&&t.event.preventDefault(),i.click=!1,!0):void 0});if(!n.touch||e){t.on(u[1],function(n,t){if(r=h=!1,n.components.eachAll(function(n){if(n.ICHARTJS_CHART){if(n.fireEvent(n,u[1],[n,t]))return r=!0,!1}else{var f=n.variable.event,i=n.isMouseOver(t);if(i.valid){if(r=r||n.atomic,f.mouseover||(f.mouseover=!0,n.fireEvent(n,"mouseover",[n,t,i])),n.fireEvent(n,"mousemove",[n,t,i]),i.stop)return!1}else f.mouseover&&(f.mouseover=!1,n.fireEvent(n,"mouseout",[n,t,i]));return!t.stopPropagation}}),i.mouseover)return t.event.preventDefault(),r||(i.mouseover=!1,n.fireEvent(n,"mouseout",[n,t])),i.mouseover;r&&(i.mouseover=r,n.fireEvent(n,"mouseover",[n,t]))});if(o)t.on("mouseover",function(){t.T.css("cursor","pointer")}).on("mouseout",function(){t.T.css("cursor","default")})}n.applyIf(t.get("sub_option"),n.clone(["shadow","tip"],t.options,!0));t.Combination||(t.bg=new n.Custom({z_index:-1,drawFn:function(){t.T.box(0,0,t.width,t.height,t.get("border"),t.get("f_color"),0,0,!0)}}),t.duration=s(t.get("animation_duration")*n.FRAME/1e3));t.oneWay=n.emptyFn},originXY:function(n,t,i){var r=n.get("align");return r==n.L?n.pushIf(n.X,t[0]):r==n.R?n.pushIf(n.X,t[1]):n.pushIf(n.X,t[2]),n.x=n.push(n.X,n.get(n.X)+n.get("offsetx")),n.y=n.push(n.Y,i[0]+n.get("offsety")),{x:n.x,y:n.y}},getPercent:function(n,t){return this.get("showpercent")?(n/(t||this.total||1)*100).toFixed(this.get("decimalsnum"))+"%":n},doActing:function(t,i,r,u,f){var e=!!t.get("communal_acting"),o=t.getPercent(i.value,i.total);t.push(e?"sub_option":"communal_acting",n.clone(t.get(e?"communal_acting":"sub_option"),!0));n.merge(t.get("sub_option"),i);n.merge(t.get("sub_option"),r);t.push("sub_option.value",o);t.push("sub_option.value_",i.value);t.get("sub_option.tip.enable")&&(t.push("sub_option.tip.text",f||i.name+" "+o),t.push("sub_option.tip.name",i.name),t.push("sub_option.tip.index",u),t.push("sub_option.tip.value",i.value),t.push("sub_option.tip.total",i.total||t.total))},register:function(t){return t.id=n.uid(t.type),this.components.push(t),t},remove:function(n,t){t&&n.components.each(function(i,r){if(t.id==i.id)return n.components.splice(r,1),!1})},doConfig:function(){var t,h,c;n.Chart.superclass.doConfig.call(this);t=this._();t.destroy(t);t.oneways.length=0;t.oneWay(t);if(t.push("communal_acting",0),!t.Combination){t.oneways.push(t.bg);t.push("r_originx",t.width-t.get("padding_right"));t.push("b_originy",t.height-t.get("padding_bottom"));t.applyGradient();n.isString(t.get("title"))&&t.push("title",n.applyIf({text:t.get("title")},t.default_.title));n.isString(t.get("subtitle"))&&t.push("subtitle",n.applyIf({text:t.get("subtitle")},t.default_.subtitle));n.isString(t.get("footnote"))&&t.push("footnote",n.applyIf({text:t.get("footnote")},t.default_.footnote));var r=0,u=t.push("l_originx",t.get("padding_left")),s=t.push("t_originy",t.get("padding_top")),i=t.push("client_width",t.width-t.get("hpadding")),f;t.get("title.text")!=""&&(h=t.get("subtitle.text")!="",r=h?t.get("title.height")+t.get("subtitle.height"):t.get("title.height"),s=t.push("t_originy",s+r),t.push("title.originx",u),t.push("title.originy",t.get("padding_top")),t.push("title.maxwidth",i),t.pushIf("title.width",i),t.title=new n.Text(t.get("title"),t),t.oneways.push(t.title),h&&(t.push("subtitle.originx",u),t.push("subtitle.originy",t.get("padding_top")+t.get("title.height")),t.pushIf("subtitle.width",i),t.push("subtitle.maxwidth",i),t.subtitle=new n.Text(t.get("subtitle"),t),t.oneways.push(t.subtitle)));t.get("footnote.text")!=""&&(c=t.get("footnote.height"),r+=c,t.push("b_originy",t.get("b_originy")-c),t.push("footnote.originx",u),t.push("footnote.originy",t.get("b_originy")),t.push("footnote.maxwidth",i),t.pushIf("footnote.width",i),t.footnote=new n.Text(t.get("footnote"),t),t.oneways.push(t.footnote));f=t.push("client_height",t.get(t.H)-t.get("vpadding")-t.pushIf("other_height",r));t.push("minDistance",o(i,f));t.push("maxDistance",e(i,f));t.push("centerx",u+i/2);t.push("centery",s+f/2)}t.get("legend.enable")&&(t.legend=new n.Legend(n.apply({maxwidth:t.get("client_width"),data:t.data},t.get("legend")),t),t.oneways.push(t.legend));t.push("sub_option.tip.wrap",t.push("tip.wrap",t.shell))}})}(n);n.Custom=n.extend(n.Component,{configure:function(){n.Custom.superclass.configure.apply(this,arguments);this.type="custom";this.set({drawFn:n.emptyFn,configFn:n.emptyFn,eventValid:undefined,animating_draw:!0})},doDraw:function(n){n.get("drawFn").call(n,n)},isEventValid:function(t,i){return n.isFunction(this.get("eventValid"))?this.get("eventValid").call(this,t,i):{valid:!1}},doConfig:function(){n.Custom.superclass.doConfig.call(this);var t=this._();t.A_draw=t.get("animating_draw");t.variable.animation={animating:!1,time:0};t.duration=0;t.get("configFn").call(t,t)}});n.Scale=n.extend(n.Component,{configure:function(){n.Scale.superclass.configure.apply(this,arguments);this.type="scale";this.set({position:"left",which:"h",basic_value:0,scale2grid:!0,distance:undefined,start_scale:0,end_scale:undefined,min_scale:undefined,max_scale:undefined,scale_space:undefined,scale_share:5,scale_enable:!0,scale_size:1,scale_width:4,scale_color:"#333333",scaleAlign:"center",labels:[],label:{},text_space:6,textAlign:"left",decimalsnum:0,join_style:"none",join_size:2});this.registerEvent("parseText")},isEventValid:function(){return{valid:!1}},getScale:function(t){var i=[t.get("basic_value"),t.get("start_scale"),t.get("end_scale"),t.get("end_scale")-t.get("start_scale"),0];return i[4]=n.inRange(i[1],i[2]+1,i[0])||n.inRange(i[2]-1,i[1],i[0]),{range:i[4],basic:i[4]?(i[0]-i[1])/i[3]:0,start:i[4]?i[0]:i[1],end:i[2],distance:i[3]}},doDraw:function(n){n.get("scale_enable")&&n.items.each(function(t){n.T.line(t.x0,t.y0,t.x1,t.y1,n.get("scale_size"),n.get("scale_color"),!1)});n.labels.each(function(n){n.draw()})},doLayout:function(n,t,i){i.get("scale_enable")&&i.items.each(function(i){i.x0+=n;i.y0+=t;i.x1+=n;i.y1+=t});i.labels.each(function(i){i.doLayout(n,t,0,i)})},doConfig:function(){var g,c,f;n.Scale.superclass.doConfig.call(this);var t=this._(),k=Math.abs,d=t.get("labels").length,ft=t.get("min_scale"),et=t.get("max_scale"),i=t.get("scale_space"),r=t.get("end_scale"),u=t.get("start_scale");if(t.items=[],t.labels=[],t.number=0,d>0)t.number=d-1;else{if(u>ft&&(u=t.push("start_scale",n.floor(ft))),(!n.isNumber(r)||r<et)&&(r=n.ceil(et),r=t.push("end_scale",!r&&!u?1:r)),i&&k(i)<k(r-u)&&t.push("scale_share",(r-u)/i),t.number=t.push("scale_share",k(t.get("scale_share"))),!i||i>r-u){for(g=(r-u+"").indexOf(".")+1,c=1;g>0;)g--,c*=10;i=t.push("scale",(r-u)*c/t.get("scale_share")/c)}parseInt(i)!=i&&t.get("decimalsnum")==0&&t.push("decimalsnum",(i+"").substring((i+"").indexOf(".")+1).length)}t.push("distanceOne",t.get("valid_distance")/t.number);var nt,e,o,tt=0,it=0,rt=0,ut=0,l=0,a=0,h=t.get("scale_width"),v=h/2,y=t.get("scaleAlign"),s=t.get("position"),p=t.get("text_space"),w="",b=t.get("coo").get("axis.width");for(t.push("which",t.get("which").toLowerCase()),t.isH=t.get("which")=="h",t.isH?(y==t.O?ut=-h:y==t.C?(ut=-v,it=v):it=h,s==t.O?(a=-p-b[0],w=t.B):(a=p+b[2],w=t.O),s=t.C):(y==t.L?rt=-h:y==t.C?(rt=-v,tt=v):tt=h,w="middle",s==t.R?(s=t.L,l=p+b[1]):(s=t.R,l=-p-b[3])),f=0;f<=t.number;f++)nt=d?t.get("labels")[f]:(i*f+u).toFixed(t.get("decimalsnum")),e=t.isH?t.get("valid_x")+f*t.get("distanceOne"):t.x,o=t.isH?t.y:t.get("valid_y")+t.get("valid_distance")-f*t.get("distanceOne"),t.items.push({x:e,y:o,x0:e+rt,y0:o+ut,x1:e+tt,y1:o+it}),t.get("label")&&t.labels.push(new n.Text(n.applyIf(n.apply(t.get("label"),n.merge({text:nt,x:e,y:o,originx:e+l,originy:o+a},t.fireEvent(t,"parseText",[nt,e+l,o+a,f,t.number==f]))),{textAlign:s,textBaseline:w}),t))}});n.Coordinate={coordinate_:function(t){var i=this._(),u=i.get("coordinate"),s;if(u.ICHARTJS_OBJECT)return i.x=i.push(i.X,u.x),i.y=i.push(i.Y,u.y),i.ILLUSIVE_COO=!0,u;var c="85%",f=n.parsePercent,r=i.get("coordinate.scale"),e=i.get("scaleAlign"),o=i.push("coordinate._width",f(i.get("coordinate.width")||c,Math.floor(i.get("client_width"))));return h=i.push("coordinate._height",f(i.get("coordinate.height")||c,Math.floor(i.get("client_height")))-(i.is3D()?(i.get("coordinate.pedestal_height")||22)+(i.get("coordinate.board_deep")||20):0)),i.push("coordinate.valid_height_value",f(i.get("coordinate.valid_height"),h)),i.push("coordinate.valid_width_value",f(i.get("coordinate.valid_width"),o)),i.originXY(i,[i.get("l_originx"),i.get("r_originx")-o,i.get("centerx")-o/2],[i.get("centery")-h/2]),i.push("coordinate.originx",i.x),i.push("coordinate.originy",i.y),t&&t(),n.isObject(r)&&(r=[r]),n.isArray(r)?(s=i.dataType!="stacked",r.each(function(t){i.get("percent")&&t.position==e&&(t=n.apply(t,{start_scale:0,end_scale:100,scale_space:10,listeners:{parseText:function(n){return{text:n+"%"}}}}));(!t.start_scale||s&&t.start_scale>i.get("minValue"))&&(t.min_scale=i.get("minValue"));(!t.end_scale||s&&t.end_scale<i.get("maxValue"))&&(t.max_scale=i.get("maxValue"))})):i.push("coordinate.scale",{position:e,scaleAlign:e,max_scale:i.get("maxValue"),min_scale:i.get("minValue")}),i.is3D()&&(i.push("coordinate.xAngle_",i.get("xAngle_")),i.push("coordinate.yAngle_",i.get("yAngle_")),i.push("coordinate.zHeight",i.get("zHeight")*i.get("bottom_scale"))),i.remove(i,i.coo),i.register(new n[i.is3D()?"Coordinate3D":"Coordinate2D"](i.get("coordinate"),i))}};n.Coordinate2D=n.extend(n.Component,{configure:function(){n.Coordinate2D.superclass.configure.apply(this,arguments);this.type="coordinate2d";this.set({sign_size:12,sign_space:5,scale:[],width:"85%",height:"85%",valid_width:"100%",valid_height:"100%",grid_line_width:1,grid_color:"#dbe1e1",gridHStyle:{},gridVStyle:{},gridlinesVisible:!0,scale2grid:!0,grids:undefined,ignoreOverlap:!0,ignoreEdge:!1,xlabel:"",ylabel:"",background_color:0,striped:!0,striped_direction:"v",striped_factor:.01,crosshair:{enable:!1},z_index:-1,axis:{enable:!0,color:"#666666",width:1}});this.scale=[];this.gridlines=[]},getScale:function(n,t){for(var i=this._(),r=0;r<i.scale.length;r++)if(i.scale[r].get("position")==n)return i.scale[r].getScale(i.scale[r]);if(!t)return n=n==i.L?i.R:n==i.R?i.L:n==i.O?i.B:i.O,i.getScale(n,!0);throw new Error("there no valid scale");},isEventValid:function(n,t){return{valid:n.x>t.x&&n.x<t.x+t.width&&n.y<t.y+t.height&&n.y>t.y}},doDraw:function(t){var e;if(t.T.box(t.x,t.y,t.width,t.height,0,t.get("f_color")),t.get("striped"))var i,u,r=!1,o=t.get("axis.width"),f=n.dark(t.get("background_color"),t.get("striped_factor"),0);e=t.get("striped_direction")=="v";t.gridlines.each(function(n){t.get("striped")&&(r&&(e?t.T.box(n.x1,n.y1+n.width,n.x2-n.x1,u-n.y1-n.width,0,f):t.T.box(i+n.width,n.y2,n.x1-i,n.y1-n.y2,0,f)),i=n.x1,u=n.y1,r=!r)}).each(function(n){n.overlap||(n.solid?t.T.line(n.x1,n.y1,n.x2,n.y2,n.width,n.color):t.T.dotted(n.x1,n.y1,n.x2,n.y2,n.width,n.color,n.size,n.fator))});t.T.box(t.x,t.y,t.width,t.height,t.get("axis"),!1,t.get("shadow"),!0);t.scale.each(function(n){n.draw()})},destroy:function(){this.crosshair&&this.crosshair.destroy()},doCrosshair:function(t){t.get("crosshair.enable")&&!t.crosshair&&(t.push("crosshair.wrap",t.root.shell),t.push("crosshair.height",t.height),t.push("crosshair.width",t.width),t.push("crosshair.top",t.y),t.push("crosshair.left",t.x),t.crosshair=new n.CrossHair(t.get("crosshair"),t))},doConfig:function(){var t,o,v,p,k,d,g,s,c,i,h,f;n.Coordinate2D.superclass.doConfig.call(this);t=this._();t.atomic=!1;t.width=t.get("_width");t.height=t.get("_height");t.valid_width=t.get("valid_width_value");t.valid_height=t.get("valid_height_value");t.get("gradient")&&n.isString(t.get("f_color"))&&t.push("f_color",t.T.avgLinearGradient(t.x,t.y,t.x,t.y+t.height,[t.get("dark_color"),t.get("light_color")]));t.get("axis.enable")?(o=t.get("axis.width"),n.isArray(o)||t.push("axis.width",[o,o,o,o])):t.push("axis.width",[0,0,0,0]);t.doCrosshair(t);var e,it=!!(t.get("gridlinesVisible")&&t.get("grids")),nt=it&&!!t.get("grids.horizontal"),tt=it&&!!t.get("grids.vertical"),r=t.height,u=t.width,l=t.valid_width,a=t.valid_height,ut=t.get("gridlinesVisible")&&t.get("scale2grid")&&!(nt&&tt),ft=t.push("x_start",t.x+(u-l)/2),et=t.push("y_start",t.y+(r-a)/2),y=t.get("axis.width");t.push("x_end",t.x+(u+l)/2);t.push("y_end",t.y+(r+a)/2);n.isArray(t.get("scale"))||(n.isObject(t.get("scale"))?t.push("scale",[t.get("scale")]):t.push("scale",[]));t.get("scale").each(function(i){e=i.position;e=e||t.L;e=e.toLowerCase();i[t.X]=t.x;i.coo=t;i[t.Y]=t.y;i.valid_x=ft;i.valid_y=et;i.position=e;e==t.O?(i.which="h",i.distance=u,i.valid_distance=l):e==t.R?(i.which="v",i.distance=r,i.valid_distance=a,i[t.X]+=u,i.valid_x+=l):e==t.B?(i.which="h",i.distance=u,i.valid_distance=l,i[t.Y]+=r,i.valid_y+=a):(i.which="v",i.distance=r,i.valid_distance=a);t.scale.push(new n.Scale(i,t.root))},t);v=t.push("ignoreOverlap",t.get("ignoreOverlap")&&t.get("axis.enable")||t.get("ignoreEdge"));v&&(p=t.get("ignoreEdge")?function(n,i,u){return n=="v"?u==t.y||u==t.y+r:i==t.x||i==t.x+n}:function(n,i,f){return n=="v"?f==t.y&&y[0]>0||f==t.y+r&&y[2]>0:i==t.x&&y[3]>0||i==t.x+u&&y[1]>0});var rt={solid:!0,size:10,fator:1,width:t.get("grid_line_width"),color:t.get("grid_color")},w=n.applyIf(t.get("gridHStyle"),rt),b=n.applyIf(t.get("gridVStyle"),rt);if(ut&&t.scale.each(function(i){(g=i.get("position"),n.isFalse(i.get("scale2grid"))||nt&&i.get("which")=="v"||tt&&i.get("which")=="h")||(k=d=0,g==t.O?d=r:g==t.R?k=-u:g==t.B?d=-r:k=u,i.items.each(function(r){v&&t.gridlines.push(n.applyIf({overlap:p.call(t,i.get("which"),r.x,r.y),x1:r.x,y1:r.y,x2:r.x+k,y2:r.y+d},i.isH?b:w))}))}),tt)for(s=t.get("grids.vertical"),n.Assert.isTrue(s.value>0,"vertical value"),i=u/s.value,h=s.value,s.way=="given_value"&&(h=i,i=s.value,i=i>u?u:i),f=0;f<=h;f++)v&&t.gridlines.push(n.applyIf({overlap:p.call(t,"h",t.x+f*i,t.y),x1:t.x+f*i,y1:t.y,x2:t.x+f*i,y2:t.y+r,H:!1,width:b.width,color:b.color},b));if(nt)for(c=t.get("grids.horizontal"),n.Assert.isTrue(c.value>0,"horizontal value"),i=r/c.value,h=c.value,c.way=="given_value"&&(h=i,i=c.value,i=i>r?r:i),f=0;f<=h;f++)v&&t.gridlines.push(n.applyIf({overlap:p.call(t,"v",t.x,t.y+f*i),x1:t.x,y1:t.y+f*i,x2:t.x+u,y2:t.y+f*i,H:!0,width:w.width,color:w.color},w))}});n.Coordinate3D=n.extend(n.Coordinate2D,{configure:function(){n.Coordinate3D.superclass.configure.apply(this,arguments);this.type="coordinate3d";this.dimension=n._3D;this.set({xAngle:60,yAngle:20,xAngle_:undefined,yAngle_:undefined,zHeight:0,pedestal_height:22,board_deep:20,left_board:!0,gradient:!0,color_factor:.18,ignoreEdge:!0,striped:!1,grid_color:"#a4ad96",background_color:"#d6dbd2",shadow_offsetx:4,shadow_offsety:2,wall_style:[],axis:{enable:!1}})},doDraw:function(n){var u=n.width,r=n.height,f=n.get("xAngle_"),e=n.get("yAngle_"),o=n.get("zHeight"),t=n.get("z_offx"),i=n.get("z_offy");n.get("pedestal_height")&&n.T.cube3D(n.x,n.y+r+n.get("pedestal_height"),f,e,!1,u,n.get("pedestal_height"),o*3/2,n.get("axis.enable"),n.get("axis.width"),n.get("axis.color"),n.get("bottom_style"));n.get("board_deep")&&n.T.cube3D(n.x+t,n.y+r-i,f,e,!1,u,r,n.get("board_deep"),n.get("axis.enable"),n.get("axis.width"),n.get("axis.color"),n.get("board_style"));n.T.cube3D(n.x,n.y+r,f,e,!1,u,r,o,n.get("axis.enable"),n.get("axis.width"),n.get("axis.color"),n.get("wall_style"));n.gridlines.each(function(r){r.solid?(n.get("left_board")&&n.T.line(r.x1,r.y1,r.x1+t,r.y1-i,r.width,r.color),n.T.line(r.x1+t,r.y1-i,r.x2+t,r.y2-i,r.width,r.color)):(n.get("left_board")&&n.T.dotted(r.x1,r.y1,r.x1+t,r.y1-i,r.width,r.color,r.size,r.fator),n.T.dotted(r.x1+t,r.y1-i,r.x2+t,r.y2-i,r.width,r.color,r.size,r.fator))});n.scale.each(function(n){n.draw()})},doConfig:function(){n.Coordinate3D.superclass.doConfig.call(this);for(var t=this._(),i=t.get("wall_style"),o=t.get("background_color")||"#d6dbd2",u=t.height,s=t.width,r=t.get("color_factor"),f=t.push("z_offx",t.get("xAngle_")*t.get("zHeight")),e=t.push("z_offy",t.get("yAngle_")*t.get("zHeight"));i.length<6;)i.push({color:o});t.get("left_board")||(i[2]=!1,t.scale.each(function(n){n.doLayout(f,-e,n)}));t.push("bottom_style",[{color:t.get("shadow_color"),shadow:t.get("shadow")},!1,!1,{color:i[3].color},!1,{color:i[3].color}]);t.push("board_style",[!1,!1,!1,{color:i[4].color},{color:i[5].color},!1]);t.get("gradient")&&(n.isString(i[0].color)&&(i[0].color=t.T.avgLinearGradient(t.x,t.y+u,t.x+s,t.y+u,[n.dark(i[0].color,r/2+.06),n.dark(i[0].color,r/2+.06)])),n.isString(i[1].color)&&(i[1].color=t.T.avgLinearGradient(t.x+f,t.y-e,t.x+f,t.y+u-e,[n.dark(i[1].color,r),n.light(i[1].color,r)])),n.isString(i[2].color)&&(i[2].color=t.T.avgLinearGradient(t.x,t.y,t.x,t.y+u,[n.light(i[2].color,r/3),n.dark(i[2].color,r)])),t.get("bottom_style")[5].color=t.T.avgLinearGradient(t.x,t.y+u,t.x,t.y+u+t.get("pedestal_height"),[n.light(i[3].color,r/2+.06),n.dark(i[3].color,r/2,0)]));t.push("wall_style",[i[0],i[1],i[2]])}});n.Rectangle=n.extend(n.Component,{configure:function(){n.Rectangle.superclass.configure.apply(this,arguments);this.type="rectangle";this.set({width:0,height:0,value_space:4,value:"",label:{},name:"",tipAlign:"top",valueAlign:"top",shadow_blur:3,shadow_offsety:-1});this.atomic=!0;this.registerEvent("parseText");this.label=null},last:function(n){n.label&&n.label.draw()},doDraw:function(n){n.drawRectangle()},doConfig:function(){n.Rectangle.superclass.doConfig.call(this);var t=this._(),s=t.variable.event,i=t.get("valueAlign");n.taylor.light(t,s);t.width=t.get(t.W);t.height=t.get(t.H);var u=t.push("centerx",t.x+t.width/2),f=t.push("centery",t.y+t.height/2),e=t.C,o="middle",r=t.get("value_space");i==t.L?(e=t.R,u=t.x-r):i==t.R?(e=t.L,u=t.x+t.width+r):i==t.B?(f=t.y+t.height+r,o=t.O):i==t.O&&(f=t.y-r,o=t.B);t.get("label")&&(t.push("label.originx",u),t.push("label.originy",f),t.push("label.text",t.push("value",t.fireString(t,"parseText",[t,t.get("value")],t.get("value")))),n.applyIf(t.get("label"),{textAlign:e,textBaseline:o,color:t.get("color")}),t.label=new n.Text(t.get("label"),t));t.get("tip.enable")&&(t.get("tip.showType")!="follow"&&t.push("tip.invokeOffsetDynamic",!1),t.tip=new n.Tip(t.get("tip"),t))}});n.Rectangle2D=n.extend(n.Rectangle,{configure:function(){n.Rectangle2D.superclass.configure.apply(this,arguments);this.type="rectangle2d";this.set({shadow_offsety:-2})},drawRectangle:function(){var n=this._();n.T.box(n.get(n.X),n.get(n.Y),n.get(n.W),n.get(n.H),n.get("border"),n.get("f_color"),n.get("shadow"))},isEventValid:function(n,t){return{valid:n.x>t.x&&n.x<t.x+t.width&&n.y<t.y+t.height&&n.y>t.y}},tipInvoke:function(){var n=this._();return function(t,i){return{left:n.tipX(t,i),top:n.tipY(t,i)}}},doConfig:function(){n.Rectangle2D.superclass.doConfig.call(this);var t=this._(),i=t.get("tipAlign");i==t.L||i==t.R?t.tipY=function(n,i){return t.get("centery")-i/2}:t.tipX=function(n){return t.get("centerx")-n/2};i==t.L?t.tipX=function(n){return t.x-t.get("value_space")-n}:i==t.R?t.tipX=function(){return t.x+t.width+t.get("value_space")}:t.tipY=i==t.B?function(){return t.y+t.height+3}:function(n,i){return t.y-i-3};t.applyGradient()}});n.Rectangle3D=n.extend(n.Rectangle,{configure:function(){n.Rectangle3D.superclass.configure.apply(this,arguments);this.type="rectangle3d";this.dimension=n._3D;this.set({zHeight:undefined,xAngle:60,yAngle:20,xAngle_:undefined,yAngle_:undefined,shadow_offsetx:2})},drawRectangle:function(){var n=this._();n.T.cube(n.get(n.X),n.get(n.Y),n.get("xAngle_"),n.get("yAngle_"),n.get(n.W),n.get(n.H),n.get("zHeight"),n.get("f_color"),n.get("border.enable"),n.get("border.width"),n.get("light_color"),n.get("shadow"))},isEventValid:function(n,t){return{valid:n.x>t.x&&n.x<t.x+t.get(t.W)&&n.y<t.y+t.get(t.H)&&n.y>t.y}},tipInvoke:function(){var n=this._();return function(t,i){return{left:n.topCenterX-t/2,top:n.topCenterY-i}}},doConfig:function(){n.Rectangle3D.superclass.doConfig.call(this);var t=this._();t.pushIf("zHeight",t.get(t.W));t.topCenterX=t.x+(t.get(t.W)+t.get(t.W)*t.get("xAngle_"))/2;t.topCenterY=t.y-t.get(t.W)*t.get("yAngle_")/2-t.get("value_space");t.get("valueAlign")==t.O&&t.label&&(t.label.push("textx",t.topCenterX),t.label.push("texty",t.topCenterY))}});n.Sector=n.extend(n.Component,{configure:function(){n.Sector.superclass.configure.apply(this,arguments);this.type="sector";this.set({value:"",name:"",ignored:!1,counterclockwise:!1,startAngle:0,middleAngle:0,endAngle:0,totalAngle:0,bound_event:"click",expand:!1,donutwidth:0,mutex:!1,increment:undefined,label_length:undefined,gradient_mode:"RadialGradientOutIn",mini_label_threshold_angle:15,mini_label:!1,label:{},rounded:!1});this.atomic=!0;this.registerEvent("changed","parseText");this.label=null;this.tip=null},bound:function(){this.expanded||this.toggle()},rebound:function(){this.expanded&&this.toggle()},toggle:function(){this.fireEvent(this,this.get("bound_event"),[this])},getDimension:function(){var n=this._();return{x:n.x,x:n.y,startAngle:n.get("startAngle"),middleAngle:n.get("middleAngle"),endAngle:n.get("endAngle")}},doDraw:function(n){n.get("ignored")||(n.label&&!n.get("mini_label")&&n.label.draw(),n.drawSector(),n.label&&n.get("mini_label")&&n.label.draw())},doText:function(t,i,r){t.push("label.originx",i);t.push("label.originy",r);t.push("label.textBaseline","middle");t.label=new n.Text(t.get("label"),t)},doLabel:function(t,i,r,u,f,e,o,s){t.push("label.originx",i);t.push("label.originy",r);t.push("label.quadrantd",u);t.push("label.line_points",f);t.push("label.labelx",e);t.push("label.labely",o);t.push("label.smooth",s);t.push("label.angle",t.get("middleAngle")%(Math.PI*2));t.label=new n.Label(t.get("label"),t)},isLabel:function(){return this.get("label")&&!this.get("mini_label")},doConfig:function(){n.Sector.superclass.doConfig.call(this);var t=this._(),i=t.variable.event,f=t.get("label"),u=t.get("bound_event"),r;if(t.get("rounded")){t.push("startAngle",0);t.push("endAngle",Math.PI*2);return}n.taylor.light(t,i);t.push("totalAngle",t.get("endAngle")-t.get("startAngle"));f&&(t.get("mini_label")&&(t.get("mini_label_threshold_angle")*Math.PI/180>t.get("totalAngle")?t.push("mini_label",!1):n.apply(t.get("label"),t.get("mini_label"))),t.push("label.text",t.fireString(t,"parseText",[t,t.get("label.text")],t.get("label.text"))),t.pushIf("label.border.color",t.get("border.color")),t.push("label.scolor",t.get("background_color")));t.variable.event.status=t.expanded=t.get("expand");t.get("tip.enable")&&(t.get("tip.showType")!="follow"&&t.push("tip.invokeOffsetDynamic",!1),t.tip=new n.Tip(t.get("tip"),t));i.poped=!1;t.on(u,function(){i.poped=!0;t.expanded=!t.expanded;t.redraw(u);i.poped=!1});t.on("beforedraw",function(n,e){return e==u&&(r=!1,t.x=t.get(t.X),t.y=t.get(t.Y),t.expanded&&(t.get("mutex")&&!i.poped?(t.expanded=!1,r=!0):(t.x+=t.get("inc_x"),t.y-=t.get("inc_y"))),i.status!=t.expanded&&(t.fireEvent(t,"changed",[t,t.expanded]),r=!0,i.status=t.expanded),f&&r&&t.label.doLayout(t.get("inc_x")*(t.expanded?1:-1),-t.get("inc_y")*(t.expanded?1:-1),2,t.label)),!0})}});n.Sector2D=n.extend(n.Sector,{configure:function(){n.Sector2D.superclass.configure.apply(this,arguments);this.type="sector2d";this.set({radius:0})},drawSector:function(){this.T.sector(this.x,this.y,this.r,this.get("donutwidth"),this.get("startAngle"),this.get("endAngle"),this.get("f_color"),this.get("border.enable"),this.get("border.width"),this.get("border.color"),this.get("shadow"),this.get("counterclockwise"))},isEventValid:function(t,i){if(!i.get("ignored")){if(i.isLabel()&&i.label.isEventValid(t,i.label).valid)return{valid:!0};var r=n.distanceP2P(i.x,i.y,t.x,t.y),u=i.get("donutwidth");if(i.r<r||u&&i.r-u>r)return{valid:!1};if(n.angleInRange(i.get("startAngle"),i.get("endAngle"),n.atan2Radian(i.x,i.y,t.x,t.y)))return{valid:!0}}return{valid:!1}},tipInvoke:function(){var t=this,r=t.get("middleAngle"),i=n.quadrantd(r);return function(u,f){var e=n.p2Point(t.x,t.y,r,t.r*.8);return{left:i>=1&&i<=2?e.x-u:e.x,top:i>=2?e.y-f:e.y}}},doConfig:function(){var t,i,r;if(n.Sector2D.superclass.doConfig.call(this),t=this._(),t.r=t.get("radius"),t.get("donutwidth")>t.r&&t.push("donutwidth",0),t.applyGradient(t.x-t.r,t.y-t.r,2*t.r*.9,2*t.r*.9),i=t.get("middleAngle"),r=t.pushIf("increment",n.lowTo(5,t.r/10)),t.push("inc_x",r*Math.cos(2*Math.PI-i)),t.push("inc_y",r*Math.sin(2*Math.PI-i)),r*=2,t.get("label"))if(t.get("mini_label"))P2=n.p2Point(t.x,t.y,i,t.get("donutwidth")?t.r-t.get("donutwidth")/2:t.r*5/8),t.doText(t,P2.x,P2.y);else{var e=n.quadrantd(i),u=n.p2Point(t.x,t.y,i,t.r+r),f=n.p2Point(t.x,t.y,i,t.r+r*.6);P2=n.p2Point(t.x,t.y,i,t.r);t.doLabel(t,P2.x,P2.y,e,[{x:P2.x,y:P2.y},{x:f.x,y:f.y},{x:u.x,y:u.y}],u.x,u.y,r*.4)}}});n.Sector3D=n.extend(n.Sector,{configure:function(){n.Sector3D.superclass.configure.apply(this,arguments);this.type="sector3d";this.dimension=n._3D;this.set({semi_major_axis:0,semi_minor_axis:0,cylinder_height:0});this.proxy=!0},isEventValid:function(t,i){if(!i.get("ignored")){if(i.isLabel()&&i.label.isEventValid(t,i.label).valid)return{valid:!0};if(!n.inEllipse(t.x-i.x,t.y-i.y,i.a,i.b))return{valid:!1};if(n.angleZInRange(i.sA,i.eA,n.atan2Radian(i.x,i.y,t.x,t.y)))return{valid:!0}}return{valid:!1}},p2p:function(n,t,i,r){return{x:n+this.a*Math.cos(i)*r,y:t+this.b*Math.sin(i)*r}},tipInvoke:function(){var t=this,r=t.get("middleAngle"),i=n.quadrantd(r);return function(n,u){var f=t.p2p(t.x,t.y,r,.6);return{left:i>=2&&i<=3?f.x-n:f.x,top:i>=3?f.y-u:f.y}}},doConfig:function(){var s;n.Sector3D.superclass.doConfig.call(this);var t=this._(),c=t.get("counterclockwise"),i=t.get("middleAngle");t.a=t.get("semi_major_axis");t.b=t.get("semi_minor_axis");t.h=t.get("cylinder_height");n.Assert.isTrue(t.a*t.b>=0,"major&minor");var e=2*Math.PI,o=function(i){while(i<0)i+=e;return Math.abs(n.atan2Radian(0,0,t.a*Math.cos(i),c?-t.b*Math.sin(i):t.b*Math.sin(i)))},r=t.pushIf("increment",n.lowTo(5,t.a/10));if(t.sA=o.call(t,t.get("startAngle")),t.eA=o.call(t,t.get("endAngle")),t.mA=o.call(t,i),t.push("inc_x",r*Math.cos(e-t.mA)),t.push("inc_y",r*Math.sin(e-t.mA)),r*=2,t.get("label"))if(t.get("mini_label"))s=t.p2p(t.x,t.y,i,.5),t.doText(t,s.x,s.y);else{var l=n.quadrantd(i),u=t.p2p(t.x,t.y,i,r/t.a+1),h=t.p2p(t.x,t.y,i,r*.6/t.a+1),f=t.p2p(t.x,t.y,i,1);t.doLabel(t,f.x,f.y,l,[{x:f.x,y:f.y},{x:h.x,y:h.y},{x:u.x,y:u.y}],u.x,u.y,r*.4)}}});n.Pie=n.extend(n.Chart,{configure:function(){n.Pie.superclass.configure.call(this);this.type="pie";this.set({radius:"100%",offset_angle:0,separate_angle:0,bound_event:"click",counterclockwise:!1,intellectLayout:!0,layout_distance:4,pop_animate:!1,mutex:!1,increment:undefined,sub_option:{label:{}}});this.registerEvent("bound","rebound");this.sectors=[];this.components.push(this.sectors);this.ILLUSIVE_COO=!0},toggle:function(n){this.sectors[n||0].toggle()},bound:function(n){this.sectors[n||0].bound()},rebound:function(n){this.sectors[n||0].rebound()},getSectors:function(){return this.sectors},doAnimation:function(n,t,i){var r=0,u=i.oA;i.sectors.each(function(f){r=i.animationArithmetic(n,0,f.get("totalAngle"),t);f.push("startAngle",u);f.push("endAngle",u+=r);i.is3D()||f.drawSector()});i.is3D()&&i.proxy.drawSector()},parse:function(n){n.data.each(function(t,i){n.doParse(n,t,i)},n);n.localizer(n)},doParse:function(n,t,i){var r=t.name+" "+n.getPercent(t.value);n.doActing(n,t,null,i,r);n.push("sub_option.id",i);n.get("sub_option.label")&&n.push("sub_option.label.text",r);n.push("sub_option.listeners.changed",function(t,i){n.fireEvent(n,i?"bound":"rebound",[n,t.get("name")])});n.sectors.push(n.doSector(n,t))},doSector:function(t){return new n[t.sub](t.get("sub_option"),t)},dolayout:function(t,i,r,u,f,e){(t.is3D()?n.inEllipse(t.get(t.X)-i,t.topY-r,t.a,t.b):n.distanceP2P(t.get(t.X),t.topY,i,r)<t.r)&&(r=t.topY-r,u.push("labelx",t.get(t.X)+(Math.sqrt(t.r*t.r-r*r)*2+f)*(e==0||e==3?1:-1)),u.localizer(u))},localizer:function(n){if(n.get("intellectLayout")){var u=[],f=[],e=n.get("layout_distance"),r,i,t;n.sectors.each(function(n){n.isLabel()&&u.push(n.label)});u.sor(function(n,t){return Math.abs(Math.sin(n.get("angle")))-Math.abs(Math.sin(t.get("angle")))>0});u.each(function(u){f.each(function(f){i=f.labelx;t=f.labely;(u.labely<=t&&t-u.labely-1<u.get(n.H)||u.labely>t&&u.labely-t-1<f.get(n.H))&&(u.labelx<=i&&i-u.labelx<u.get(n.W)||u.labelx>i&&u.labelx-i<f.get(n.W))&&(r=u.get("quadrantd"),u.push("labely",u.get("labely")+t-u.labely+(u.get(n.H)+e)*(r>1?-1:1)),u.localizer(u),n.dolayout(n,u.get("labelx"),u.get("labely")+u.get(n.H)/2*(r<2?-1:1),u,e,r))},n);f.push(u)})}},doConfig:function(){n.Pie.superclass.doConfig.call(this);var t=this._(),s,r=t.get("radius"),h=t.get("sub_option.label")?.35:.44,e=Math.PI*2;t.sub=t.is3D()?"Sector3D":"Sector2D";t.sectors.zIndex=t.get("z_index");t.sectors.length=0;t.oA=n.angle2Radian(t.get("offset_angle"))%e;t.is3D()&&(h+=.06);var o=t.data.length,u=n.angle2Radian(n.between(0,90,t.get("separate_angle"))),c=e-u,u=u/o,i=t.oA+u,f=i;t.total==0&&(s=1/o);t.data.each(function(n,r){i+=(s||n.value/t.total)*c;r==o-1&&(i=e+t.oA);n.startAngle=f;n.endAngle=i;n.totalAngle=i-f;n.middleAngle=(f+i)/2;f=i+u},t);t.r=r=n.parsePercent(r,Math.floor(t.get("minDistance")*h));t.topY=t.originXY(t,[r+t.get("l_originx"),t.get("r_originx")-r,t.get("centerx")],[t.get("centery")]).y;n.apply(t.get("sub_option"),n.clone([t.X,t.Y,"bound_event","mutex","increment"],t.options))}});n.Pie2D=n.extend(n.Pie,{configure:function(){n.Pie2D.superclass.configure.call(this);this.type="pie2d"},doConfig:function(){n.Pie2D.superclass.doConfig.call(this);var t=this._();t.push("sub_option.radius",t.r);t.parse(t)}});n.register("Pie2D");n.Pie3D=n.extend(n.Pie,{configure:function(){n.Pie3D.superclass.configure.apply(this,arguments);this.type="pie3d";this.dimension=n._3D;this.set({zRotate:45,yHeight:30});this.positive=!0},doSector:function(t,i){return t.push("sub_option.cylinder_height",i.cylinder_height?i.cylinder_height*t.get("zRotate_"):t.get("cylinder_height")),new n[t.sub](t.get("sub_option"),t)},one:function(t){var o,i,h=[],r=t.get("counterclockwise"),s=function(n,t){return 1+Math.sin(t?n+Math.PI:n)},u="startAngle",f="endAngle",e;lay=function(t,i,r,u){e=n.quadrantd(i);(t&&(e==0||e==3)||!t&&(e==2||e==1))&&o.push({g:i,z:i==r,x:u.x,y:u.y,a:u.a,b:u.b,color:n.dark(u.get("background_color")),h:u.h,F:u})};t.proxy=new n.Custom({z_index:t.get("z_index")+1,drawFn:function(){this.drawSector();h=[];t.sectors.each(function(n){n.get("label")&&(n.expanded?h.push(n.label):n.label.draw())});h.each(function(n){n.draw()})}});t.proxy.drawSector=function(){t.sectors.each(function(n){t.T.ellipse(n.x,n.y+n.h,n.a,n.b,n.get(u),n.get(f),0,n.get("border.enable"),n.get("border.width"),n.get("border.color"),n.get("shadow"),r,!0)},t);o=[];i=[];t.sectors.each(function(t){lay(r,t.get(u),t.get(f),t);lay(!r,t.get(f),t.get(u),t);i=i.concat(n.visible(t.get(u),t.get(f),t))},t);o.sor(function(n,t){var i=s(n.g)-s(t.g);return i==0?n.z:i>0});o.each(function(n){t.T.sector3D.layerDraw.call(t.T,n.x,n.y,n.a+.5,n.b+.5,r,n.h,n.g,n.color)},t);t.processAnimation||i.sor(function(n,t){return s((n.s+n.e)/2,1)-s((t.s+t.e)/2,1)<0});i.each(function(n){t.T.sector3D.sPaint.call(t.T,n.f.x,n.f.y,n.f.a,n.f.b,n.s,n.e,r,n.f.h,n.f.get("f_color"))},t);t.sectors.each(function(n){t.T.ellipse(n.x,n.y,n.a,n.b,n.get(u),n.get(f),n.get("f_color"),n.get("border.enable"),n.get("border.width"),n.get("border.color"),!1,!1,!0)},t)};t.one=n.emptyFn},doConfig:function(){n.Pie3D.superclass.doConfig.call(this);var t=this._(),i=n.angle2Radian(t.get("zRotate"));t.push("cylinder_height",t.get("yHeight")*t.push("zRotate_",Math.abs(Math.cos(i))));t.a=t.push("sub_option.semi_major_axis",t.r);t.b=t.push("sub_option.semi_minor_axis",t.r*Math.abs(Math.sin(i)));t.topY=t.push("sub_option.originy",t.get(t.Y)-t.get("yHeight")/2);t.parse(t);t.one(t);t.components.push(t.proxy)}});n.register("Pie3D");n.Donut2D=n.extend(n.Pie,{configure:function(){n.Donut2D.superclass.configure.call(this);this.type="donut2d";this.set({donutwidth:.3,center:{text:"",line_height:24,fontweight:"bold",fontsize:24}})},doConfig:function(){n.Donut2D.superclass.doConfig.call(this);var t=this._(),i="donutwidth",r=t.r;t.push("sub_option.radius",r);t.get(i)>0&&(t.get(i)<1?t.push(i,Math.floor(r*t.get(i))):t.get(i)>=r&&t.push(i,0),t.push("sub_option.donutwidth",t.get(i)));n.isString(t.get("center"))&&t.push("center",n.applyIf({text:t.get("center")},t.default_.center));t.get("center.text")!=""&&(t.push("center.originx",t.get(t.X)),t.push("center.originy",t.get(t.Y)),t.push("center.textBaseline","middle"),t.center=new n.Text(t.get("center"),t),t.components.push(t.center));t.parse(t)}});n.register("Donut2D");n.Column=n.extend(n.Chart,{configure:function(){n.Column.superclass.configure.call(this);this.type="column";this.set({coordinate:{},column_width:undefined,column_space:undefined,text_space:6,scaleAlign:"left",sub_option:{},label:{}});this.registerEvent();this.rectangles=[];this.labels=[];this.components.push(this.labels);this.components.push(this.rectangles)},doAnimation:function(n,t,i){var r;i.labels.each(function(n){n.draw()});i.rectangles.each(function(u){r=Math.ceil(i.animationArithmetic(n,0,u.height,t));u.push(i.Y,u.y+(u.height-r));u.push(i.H,r);u.drawRectangle()})},getCoordinate:function(){return this.coo},doLabel:function(t,i,r,u,f){t.labels.push(new n.Text(n.apply(t.get("label"),{id:i,text:r,originx:u,originy:f}),t))},doParse:function(n,t,i,r){n.doActing(n,t,r,i)},engine:function(n){var t=n.get("column_width"),i=n.get("column_space"),u=n.coo.getScale(n.get("scaleAlign")),f=n.coo.valid_height,o=t/2,e=t*(n.get("group_fator")||0),s=n.dataType!="complex"?t+i:n.data.length*t+i+(n.is3D()?(n.data.length-1)*e:0),r=n.coo.get("y_end"),h=r-u.basic*f-(n.is3D()?n.get("zHeight")*(n.get("bottom_scale")-1)/2*n.get("yAngle_"):0),c=i+n.coo.get("x_start");r=r+n.get("text_space")+n.coo.get("axis.width")[2];n.doEngine(n,t,i,u,f,o,e,s,c,h,r)},doConfig:function(){n.Column.superclass.doConfig.call(this);var t=this._(),i="column_width",r="z_index";t.sub=t.is3D()?"Rectangle3D":"Rectangle2D";t.rectangles.length=0;t.labels.length=0;t.rectangles.zIndex=t.get(r);t.labels.zIndex=t.get(r)+1;t.coo=n.Coordinate.coordinate_.call(t,function(){var n=t.data.length,e=t.get("coordinate.valid_width_value"),u,f,r;t.dataType=="complex"?(r=t.get("labels").length,n=r*n+(t.is3D()?(n-1)*r*t.get("group_fator"):0),u=Math.floor(e/(r+1+n)),f=t.pushIf(i,u),r+=1):(t.dataType=="stacked"&&(n=t.get("labels").length),u=Math.floor(e*2/(n*3+1)),f=t.pushIf(i,u),r=n+1);f*n>e&&(f=t.push(i,u));t.push("column_space",(e-f*n)/r);t.is3D()&&(t.push("zHeight",t.get(i)*t.get("zScale")),t.push("sub_option.zHeight",t.get("zHeight")),t.push("sub_option.xAngle_",t.get("xAngle_")),t.push("sub_option.yAngle_",t.get("yAngle_")))});t.push("sub_option.width",t.get(i))}});n.Column2D=n.extend(n.Column,{configure:function(){n.Column2D.superclass.configure.call(this);this.type="column2d"},doEngine:function(t,i,r,u,f,e,o,s,h,c,l){var a;t.data.each(function(i,r){a=(i.value-u.start)*f/u.distance;t.doParse(t,i,r,{id:r,originx:h+r*s,originy:c-(a>0?a:0),height:Math.abs(a)});t.rectangles.push(new n[t.sub](t.get("sub_option"),t));t.doLabel(t,r,i.name,h+s*r+e,l)},t)},doConfig:function(){n.Column2D.superclass.doConfig.call(this);this.engine(this)}});n.register("Column2D");n.Column3D=n.extend(n.Column2D,{configure:function(){n.Column3D.superclass.configure.call(this);this.type="column3d";this.dimension=n._3D;this.set({coordinate:{},xAngle:60,yAngle:20,zScale:1,bottom_scale:1.4})},doConfig:function(){n.Column3D.superclass.doConfig.call(this)}});n.register("Column3D");n.ColumnMulti2D=n.extend(n.Column,{configure:function(){n.ColumnMulti2D.superclass.configure.call(this);this.type="columnmulti2d";this.dataType="complex";this.set({labels:[]})},doEngine:function(t,i,r,u,f,e,o,s,h,c,l){var a;t.columns.each(function(e,v){e.item.each(function(r,e){a=(r.value-u.start)*f/u.distance;t.doParse(t,r,e,{id:v+"_"+e,originx:h+e*(i+o)+v*s,originy:c-(a>0?a:0),height:Math.abs(a)});t.rectangles.push(new n[t.sub](t.get("sub_option"),t))},t);t.doLabel(t,v,e.name,h-r*.5+(v+.5)*s,l)},t)},doConfig:function(){n.ColumnMulti2D.superclass.doConfig.call(this);this.engine(this)}});n.register("ColumnMulti2D");n.ColumnMulti3D=n.extend(n.ColumnMulti2D,{configure:function(){n.ColumnMulti3D.superclass.configure.call(this);this.type="columnmulti3d";this.dataType="complex";this.dimension=n._3D;this.set({xAngle:60,yAngle:20,zScale:1,group_fator:.3,bottom_scale:1.4})},doConfig:function(){n.ColumnMulti3D.superclass.doConfig.call(this)}});n.register("ColumnMulti3D");n.ColumnStacked2D=n.extend(n.Column,{configure:function(){n.ColumnStacked2D.superclass.configure.call(this);this.type="columnstacked2d";this.dataType="stacked";this.set({percent:!1,labels:[],sub_option:{label:{color:"#ffffff"},valueAlign:"middle"}})},doEngine:function(t,i,r,u,f,e,o,s,h,c,l){var v,a,y,p=t.get("percent");t.columns.each(function(i,e){v=0;y=p?100/i.total:1;i.item.each(function(r,o){a=(r.value*y-u.start)*f/u.distance;r.total=i.total;t.doParse(t,r,o,{id:e+"_"+o,originx:h+e*s,originy:c-(a>0?a:0)-v,height:Math.abs(a)});v+=a;t.rectangles.push(new n[t.sub](t.get("sub_option"),t))},t);t.doLabel(t,e,i.name,h-r*.5+(e+.5)*s,l)},t)},doConfig:function(){n.ColumnStacked2D.superclass.doConfig.call(this);this.engine(this)}});n.register("ColumnStacked2D");n.ColumnStacked3D=n.extend(n.ColumnStacked2D,{configure:function(){n.ColumnStacked3D.superclass.configure.call(this);this.type="columnstacked3d";this.dataType="stacked";this.dimension=n._3D;this.set({percent:!1,sub_option:{label:{color:"#ffffff"},valueAlign:"middle"},coordinate:{},xAngle:60,yAngle:20,zScale:1,bottom_scale:1.4})},doConfig:function(){n.ColumnStacked3D.superclass.doConfig.call(this)}});n.register("ColumnStacked3D");n.Bar=n.extend(n.Chart,{configure:function(){n.Bar.superclass.configure.call(this);this.type="bar";this.set({coordinate:{striped_direction:"h"},bar_height:undefined,bar_space:undefined,text_space:6,scaleAlign:"bottom",sub_option:{},label:{}})},getCoordinate:function(){return this.coo},doLabel:function(t,i,r,u,f){t.labels.push(new n.Text(n.apply(t.get("label"),{id:i,text:r,textAlign:"right",textBaseline:"middle",originx:u,originy:f}),t))},doParse:function(n,t,i,r){n.doActing(n,t,r,i)},engine:function(n){var t=n.get("bar_height"),i=n.get("bar_space"),r=n.coo.getScale(n.get("scaleAlign")),u=n.coo.valid_width,f=t/2,e=n.dataType!="complex"?t+i:n.data.length*t+i,o=n.coo.get("x_start")+r.basic*u,s=n.coo.get(n.X)-n.get("text_space")-n.coo.get("axis.width")[3],h=n.coo.get("y_start")+i;n.doEngine(n,t,i,r,u,f,e,o,s,h)},doAnimation:function(n,t,i){i.labels.each(function(n){n.draw()});i.rectangles.each(function(r){r.push(i.W,Math.ceil(i.animationArithmetic(n,0,r.width,t)));r.drawRectangle()})},doConfig:function(){n.Bar.superclass.doConfig.call(this);var t=this._(),i="bar_height",r="z_index";t.rectangles=[];t.labels=[];t.rectangles.zIndex=t.get(r);t.labels.zIndex=t.get(r)+1;t.components.push(t.labels);t.components.push(t.rectangles);t.coo=n.Coordinate.coordinate_.call(t,function(){var n=t.data.length,e=t.get("coordinate.valid_height_value"),u,f,r;t.dataType=="complex"?(r=t.get("labels").length,n=r*n+(t.is3D()?(n-1)*r*t.get("group_fator"):0),u=Math.floor(e/(r+1+n)),f=t.pushIf(i,u),r+=1):(t.dataType=="stacked"&&(n=t.get("labels").length),u=Math.floor(e*2/(n*3+1)),f=t.pushIf(i,u),r=n+1);f*n>e&&(f=t.push(i,u));t.push("bar_space",(e-f*n)/r)});t.push("sub_option.height",t.get(i));t.push("sub_option.valueAlign",t.R);t.push("sub_option.tipAlign",t.R)}});n.Bar2D=n.extend(n.Bar,{configure:function(){n.Bar2D.superclass.configure.call(this);this.type="bar2d"},doEngine:function(t,i,r,u,f,e,o,s,h,c){var l;t.data.each(function(i,r){l=(i.value-u.start)*f/u.distance;t.doParse(t,i,r,{id:r,originy:c+r*o,width:Math.abs(l),originx:s+(l>0?0:-Math.abs(l))});t.rectangles.push(new n.Rectangle2D(t.get("sub_option"),t));t.doLabel(t,r,i.name,h,c+r*o+e)},t)},doConfig:function(){n.Bar2D.superclass.doConfig.call(this);this.engine(this)}});n.register("Bar2D");n.BarMulti2D=n.extend(n.Bar,{configure:function(){n.BarMulti2D.superclass.configure.call(this);this.type="barmulti2d";this.dataType="complex";this.set({labels:[]})},doEngine:function(t,i,r,u,f,e,o,s,h,c){var l;t.columns.each(function(e,a){e.item.each(function(r,e){l=(r.value-u.start)*f/u.distance;t.doParse(t,r,e,{id:a+"_"+e,originy:c+e*i+a*o,width:Math.abs(l),originx:s+(l>0?0:-Math.abs(l))});t.rectangles.push(new n.Rectangle2D(t.get("sub_option"),t))},t);t.doLabel(t,a,e.name,h,c-r*.5+(a+.5)*o)},t)},doConfig:function(){n.BarMulti2D.superclass.doConfig.call(this);this.engine(this)}});n.register("BarMulti2D");n.BarStacked2D=n.extend(n.Bar,{configure:function(){n.BarStacked2D.superclass.configure.call(this);this.type="barstacked2d";this.dataType="stacked";this.set({percent:!1,labels:[],sub_option:{label:{color:"#ffffff"},valueAlign:"middle"}})},doEngine:function(t,i,r,u,f,e,o,s,h,c){var a,l,v,y=t.get("percent");t.columns.each(function(i,e){a=0;v=y?100/i.total:1;i.item.each(function(r,h){l=(r.value*v-u.start)*f/u.distance;r.total=i.total;t.doParse(t,r,h,{id:e+"_"+h,originy:c+e*o,originx:s+(l>0?0:-Math.abs(l))+a,width:Math.abs(l)});a+=l;t.rectangles.push(new n.Rectangle2D(t.get("sub_option"),t))},t);t.doLabel(t,e,i.name,h,c-r*.5+(e+.5)*o)},t)},doConfig:function(){n.BarStacked2D.superclass.doConfig.call(this);this.push("sub_option.valueAlign",this.C);this.engine(this)}});n.register("BarStacked2D");n.LineSegment=n.extend(n.Component,{configure:function(){n.LineSegment.superclass.configure.apply(this,arguments);this.type="linesegment";this.set({brushsize:1,intersection:!0,label:{},sign:"round",area_color:null,hollow:!0,hollow_inside:!0,hollow_color:"#FEFEFE",smooth:!1,smoothing:1.5,point_size:6,points:[],keep_with_coordinate:!1,shadow_blur:1,shadow_offsety:1,point_space:0,coordinate:null,event_range_x:0,limit_y:!1,tip_offset:2,event_range_y:0});this.registerEvent("parseText");this.tip=null},drawSegment:function(){var n=this._();n.polygons.each(function(t){n.T.polygon.apply(n.T,t)});n.T.shadowOn(n.get("shadow"));n.lines.each(function(t){n.T.lineArray.apply(n.T,t)});n.intersections.each(function(t){n.sign_plugin?n.sign_plugin_fn.apply(n,t):n.T.round0.apply(n.T,t)});n.get("shadow")&&n.T.shadowOff()},doDraw:function(n){n.drawSegment();n.get("label")&&n.labels.each(function(n){n.draw()})},isEventValid:function(){},tipInvoke:function(){var i=this.x,u=this.y,n=this.get("tip_offset"),r=this.get("point_size")+n,t=this;return function(u,f,e){var o=e.left,s=e.top;return o=t.tipPosition<3&&o-u-i-n>0||t.tipPosition>2&&o-u-i-n<0?o-(u+n):o+n,s=t.tipPosition%2==0?s+r:s-f-r,{left:o,top:s}}},PP:function(n,t,i,r,u,f){n.get("area")&&n.polygons.push([n.get("area_color")||n.get("light_color2"),0,n.get("brushsize"),0,0,n.get("area_opacity"),n.get("smooth")?t:[{x:i,y:r}].concat(t.concat([{x:u,y:f}])),n.get("smooth"),n.get("smoothing")||1.5,[{x:i,y:r},{x:u,y:f}]])},parse:function(t){t.polygons=[];t.lines=[];t.intersections=[];t.labels=[];var v=t.get("points"),h=t.get("intersection"),y=!!t.get("label"),i=[],s=!1,c=t.get("smooth"),l=t.get("smoothing")||1.5,r=t.get("f_color"),u=t.get("brushsize"),f=t.get("point_size");if(h){var a=t.getPlugin("sign"),e=r,o=t.get("hollow_color");t.sign_plugin=n.isFunction(a);t.sign_plugin_fn=a;t.get("hollow_inside")&&(e=o,o=r)}v.each(function(a){a.x_=a.x;a.y_=a.y;!a.ignored&&y&&(t.push("label.originx",a.x),t.push("label.originy",a.y-f/2-1),t.push("label.text",t.fireString(t,"parseText",[t,a.value],a.value)),n.applyIf(t.get("label"),{textBaseline:"bottom",color:t.get("f_color")}),t.labels.push(new n.Text(t.get("label"),t)));a.ignored&&s?(t.lines.push([i,u,r,c,l]),t.PP(t,i,i[0].x,t.y,i[i.length-1].x,t.y),i=[],s=!1):a.ignored||(i.push(a),s=!0);h&&!a.ignored&&t.intersections.push(t.sign_plugin?[t.T,t.get("sign"),a,f,a.color||e,a.hollow_color||o]:t.get("hollow")?[a,f/2-u+1,a.color||e,u+1,a.hollow_color||o]:[a,f/2,a.color||e])});i.length&&(t.lines.push([i,u,r,c,l]),t.PP(t,i,i[0].x,t.y,i[i.length-1].x,t.y))},doConfig:function(){n.LineSegment.superclass.doConfig.call(this);n.Assert.isTrue(this.get("point_space")>0,"point_space");var t=this._(),a=t.get("point_size")*3/2,u=t.get("point_space"),f=t.get("event_range_y"),r=t.get("event_range_x"),e=t.get("tipInvokeHeap"),i=t.get("points"),v=t.get("name");if(t.parse(t),(r<=0||r>u/2)&&(r=t.push("event_range_x",u/2)),f==0&&(f=t.push("event_range_y",a/2)),t.get("tip.enable")){t.on("mouseover",function(){e.push(t);t.tipPosition=e.length}).on("mouseout",function(){e.pop()});t.push("tip.invokeOffsetDynamic",!0);t.tip=new n.Tip(t.get("tip"),t)}var o=t.get("coordinate"),s=t.get("limit_y"),h=t.get("keep_with_coordinate"),c=function(n,t,i){return!n.ignored&&Math.abs(t-n.x)<r&&(!s||s&&Math.abs(i-n.y)<f)?!0:!1},l=function(n){return{valid:!0,name:v,value:i[n].value,text:i[n].text,top:i[n].y,left:i[n].x,i:n,hit:!0}};t.isEventValid=function(r){var f,e;if(o&&!o.isEventValid(r,o).valid)return{valid:!1};if(f=Math.floor((r.x-t.x)/u),f<0||f>=i.length-1)return f=n.between(0,i.length-1,f),c(i[f],r.x,r.y)?l(f):{valid:h};for(e=f;e<=f+1;e++)if(c(i[e],r.x,r.y))return l(e);return{valid:h}}}});n.Line=n.extend(n.Chart,{configure:function(){n.Line.superclass.configure.call(this);this.type="line";this.set({brushsize:1,coordinate:{axis:{width:[0,0,2,2]}},crosshair:{enable:!1},tipMocker:null,tipMockerOffset:null,scaleAlign:"left",labelAlign:"bottom",labels:[],label_space:6,proportional_spacing:!0,sub_option:{},legend:{sign:"bar"},label:{}});this.registerEvent("parsePoint");this.lines=[];this.components.push(this.lines)},getCoordinate:function(){return this.coo},doConfig:function(){var t,e,a,f;n.Line.superclass.doConfig.call(this);t=this._();e=t.data.length==1;t.lines.length=0;t.lines.zIndex=t.get("z_index");a=t.pushIf("sub_option.keep_with_coordinate",e);t.get("crosshair.enable")&&(t.pushIf("crosshair.hcross",e),t.push("crosshair.invokeOffset",function(n){var i=t.lines[0].isEventValid(n);return i.valid?i:a}));t.Combination||(t.push("coordinate.crosshair",t.get("crosshair")),t.pushIf("coordinate.scale",[{position:t.get("scaleAlign"),max_scale:t.get("maxValue")},{position:t.get("labelAlign"),start_scale:1,scale:1,end_scale:t.get("maxItemSize"),labels:t.get("labels"),label:t.get("label")}]));t.coo=n.Coordinate.coordinate_.call(t);t.Combination&&(t.coo.push("crosshair",t.get("crosshair")),t.coo.doCrosshair(t.coo));var o=t.coo.valid_width,s=o,v=t.get("maxItemSize")-1,y=o/v,h=t.get("point_space");if(t.get("proportional_spacing")&&(h&&h<y?s=v*h:t.push("point_space",y)),t.push("sub_option.width",s),t.push("sub_option.height",t.coo.valid_height),t.push("sub_option.originx",t.coo.get("x_start")+(o-s)/2),t.push("sub_option.originy",t.coo.get("y_end")),t.get("tip.enable")&&!t.mocker&&n.isFunction(t.get("tipMocker"))){t.push("sub_option.tip.enable",!1);t.push("tip.invokeOffsetDynamic",!0);var c,b=t.coo.get(t.X),l=t.coo.get(t.Y),p=t.coo.height,u=t.get("tipMockerOffset"),w,i,r;u=n.isNumber(u)?u<0?0:u>1?1:u:null;t.push("tip.invokeOffset",function(n,t,i){return u!=null?i.top=l+(p-t)*u:(i.top=i.maxTop-(i.maxTop-i.minTop)/3-t,(t>p||l>i.top)&&(i.top=l)),{left:i.left-n-b>5?i.left-n-5:i.left+5,top:i.top}});f=t.get("tip.listeners.parseText");f&&delete t.get("tip.listeners").parseText;t.mocker=new n.Custom({eventValid:function(n){return i=t.lines[0].isEventValid(n),i.hit=w!=i.i,i.valid&&(w=i.i,c=[],t.lines.each(function(t,u){r=t.isEventValid(n);u==0?i.minTop=i.maxTop=r.top:(i.minTop=Math.min(i.minTop,r.top),i.maxTop=Math.max(i.maxTop,r.top));c.push(f?f(null,r.name,r.value,r.text,r.i):r.name+" "+r.value)}),i.text=t.get("tipMocker").call(t,c,i.i)||"tipMocker not return"),i.valid?i:!1}});new n.Tip(t.get("tip"),t.mocker);t.register(t.mocker)}t.pushIf("sub_option.area_opacity",t.get("area_opacity"))}});n.LineBasic2D=n.extend(n.Line,{configure:function(){n.LineBasic2D.superclass.configure.call(this);this.type="basicline2d";this.tipInvokeHeap=[]},doAnimation:function(n,t,i){i.lines.each(function(r){r.get("points").each(function(u){u.y=r.y-Math.ceil(i.animationArithmetic(n,0,r.y-u.y_,t))});r.drawSegment()})},doConfig:function(){n.LineBasic2D.superclass.doConfig.call(this);var t=this._(),i,o=t.coo.valid_height,s=t.get("point_space"),r,u,f,c=t.get("sub_option.originx"),h,e;t.push("sub_option.tip.showType","follow");t.push("sub_option.coordinate",t.coo);t.push("sub_option.tipInvokeHeap",t.tipInvokeHeap);t.push("sub_option.point_space",s);t.data.each(function(l){i=t.coo.getScale(l.scaleAlign||t.get("scaleAlign"));h=t.get("sub_option.originy")-i.basic*o;r=[];l.value.each(function(a,v){u=s*v;f=(a-i.start)*o/i.distance;e={x:c+u,y:h-f,value:a,text:l.name+" "+a};n.merge(e,t.fireEvent(t,"parsePoint",[l,a,u,f,v,i]));r.push(e)},t);n.merge(t.get("sub_option"),l);t.push("sub_option.points",r);t.push("sub_option.brushsize",l.linewidth||l.line_width);t.lines.push(new n.LineSegment(t.get("sub_option"),t))},this)}});n.register("LineBasic2D");n.Area2D=n.extend(n.LineBasic2D,{configure:function(){n.Area2D.superclass.configure.call(this);this.type="area2d";this.set({area_opacity:.3})},doConfig:function(){this.push("sub_option.area",!0);n.Area2D.superclass.doConfig.call(this)}});n.register("Area2D")}(iChart);
//# sourceMappingURL=ichart.1.2.min.js.map
